import{r as t,c as i,t as e,h as s,H as o,a}from"./p-BVbYP5UG.js";import{d as n}from"./p-O1A-ZSZs.js";import{t as h,d as r}from"./p-B9Bv72kO.js";import{S as d}from"./p-DtH7945i.js";import{a as l}from"./p-B29l_iU6.js";import{c}from"./p-BLeWSNPN.js";import{s as p}from"./p-BpTTFEEs.js";import{g as f}from"./p-Cg-hFIOP.js";import{V as m}from"./p-DTAuyNBn.js";import{t as u,c as b}from"./p-CZoCRgNL.js";import{F as k}from"./p-CkSrI1o0.js";import"@oddbird/popover-polyfill";import"./p-BsdBppw3.js";import"./p-H-KPsjGO.js";import"./p-B85MJLTf.js";import"./p-lK2WYNKL.js";import"./p-BKnx-nkd.js";import"./p-B7eN8IFF.js";import"./p-DXVWym72.js";import"./p-3aNLeb18.js";import"./p-D53F0nW8.js";const g='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}:host{width:fit-content;display:block}.ks-time-picker{cursor:pointer}.ks-time-picker--suffix{display:flex}.ks-time-picker--content{width:200px}.ks-time-picker [ks-input]::part(input){cursor:pointer}.ks-time-picker__icon:not(.ks-time-picker__icon--disabled){width:16px;height:16px;color:var(--ks-color-neutral-onSurface)}.ks-time-picker__icon--disabled{width:16px;height:16px;color:var(--ks-color-neutral-onSurfaceDisabled)}';var y=undefined&&undefined.__decorate||function(t,i,e,s){var o=arguments.length,a=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)if(n=t[h])a=(o<3?n(a):o>3?n(i,e,a):n(i,e))||a;return o>3&&a&&Object.defineProperty(i,e,a),a};const w=()=>false;const x="ks-time-picker";const v="HH:mm:ss";const j=class extends k{constructor(e){super();t(this,e);this.ksChange=i(this,"ksChange",1);this["ks-name"]="ks-time-picker";this.placement="bottom-start";this.format=v;this.hourStep=1;this.minuteStep=1;this.secondStep=1;this.isRange=false;this.placeholder="";this.timeZoneDisplayPosition="picker";this.hasTimezone=true;this.cur=-1;this.size="md";this.width=240;this.showHour=true;this.showMinute=true;this.showSecond=false;this.isVisible=false}get locale(){return p.state.config.locale}get timeFormatter(){return new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:"numeric",calendar:"gregory"})}handleIsRangeChange(t){if(t){this.dateValue=[];e(this.el)}else{this.dateValue=undefined}this.panelValue=""}componentWillLoad(){const t=l(n.parse("23:00:00","HH:mm:ss",new Date),this.locale);this.isHour12=this.format&&this.format!==v?this.format.includes("a"):/pm|am/i.test(t);if(this.value===undefined){if(Array.isArray(this.defaultValue)){this.dateValue=this.defaultValue.map((t=>n.parse(t,this.format,new Date)));this.panelValue=this.defaultValue[0]}else{this.dateValue=this.defaultValue?n.parse(this.defaultValue,this.format,new Date):null;this.panelValue=this.defaultValue}}else{if(Array.isArray(this.value)){this.dateValue=this.value.map((t=>n.parse(t,this.format,new Date)));this.panelValue=this.value[0]}else{this.dateValue=this.value?n.parse(this.value,this.format,new Date):null;this.panelValue=this.value}}}handleValueChange(t){if(t){if(Array.isArray(t)){this.dateValue=t.map((t=>n.parse(t,this.format,new Date)))}else{this.dateValue=n.parse(t,this.format,new Date)}}else{this.dateValue=null}this.updatePanelValue()}updatePanelValue(){this.panelValue=this.dateValue?this.isRange?this.dateValue[this.cur]&&n.format(this.dateValue[this.cur],this.format)||"":n.format(this.dateValue,this.format):""}timeValueChange(t){let i,e="";if(this.isRange&&t){const s=this.value?this.value:this.dateValue?this.dateValue.map((t=>n.format(t,this.format))):[];const o=[...s];o[this.cur]=t;i=o.map((t=>n.parse(t,this.format,new Date)));e=t;this.ksChange?.emit(o)}else{this.ksChange?.emit(t);e=t?t:"";i=t?n.parse(t,this.format,new Date):null}if(this.value===undefined){this.panelValue=e;this.dateValue=i}}render(){const{disabled:t,status:i}=f(this);const e=Math.max(65,(this.format.toLocaleLowerCase().includes("a")?22:0)+24*this.format.split(":").length);return s(o,{key:"ae537efbfc46fff5708b5f62e0c3888460fa7ce1",dir:r(),"ks-time-picker":true},s("ks-picker-base",{key:"f54adc889afab8f27d3e503c5845d3e9c48db868",exportparts:"field: field",timeZoneDisplayPosition:this.timeZoneDisplayPosition,width:this.width,placeholder:this.placeholder||h(u.placeholder),startPlaceholder:h(u.startPlaceholder),endPlaceholder:h(u.endPlaceholder),status:i,isRange:this.isRange,format:this.format,hasTimezone:this.hasTimezone,inputWidth:e,size:this.size,onKsShow:t=>{const{detail:i}=t;this.isVisible=true;this.updatePanelValue();this.cur=i;this.popoverVisible=true;this.timePanelEl?.gotoTime()},onKsHide:()=>{this.isVisible=false;this.popoverVisible=false},onKsChange:({detail:t})=>{this.timeValueChange(t)},clearable:this.clearable,disabled:t,value:this.dateValue?Array.isArray(this.dateValue)?this.dateValue.map((t=>this.format!==v?n.format(t,this.format):this.timeFormatter.format(t))):this.format!==v?n.format(this.dateValue,this.format):this.timeFormatter.format(this.dateValue):"",placement:this.placement,popoverRef:t=>this.popoverRef=t,innerInputMinWidth:0,"data-testid":"picker-index-k258b4"},this.showIconSlot&&s("slot",{key:"76eb2a216eb214d568e9ddb739e5117100a28bec",name:"show-icon",slot:"show-icon"}),s("div",{key:"3d7eb01e2a24e76d80982e66be551b9dfb22d6a1",slot:"show-icon",part:"show-icon",class:c(`${x}__icon`,{[`${x}__icon--disabled`]:t})},s("svg",{key:"504d42e7abdd8cd86a52c58ee9fe4e0a9809d00c",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s("g",{key:"f70a3cf0bd6bc695a8b029c085660e3a3174931d"},s("circle",{key:"aceb99fb6bb5c14ce5d8dacabb76b9e095dd8203",cx:"8.00015",cy:"8.00015",r:"6.50229",transform:"rotate(-180 8.00015 8.00015)",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}),s("path",{key:"680998c1305e8705e226a47f2fa09a01ab9de1cf",d:"M8 4.00342V8.00342L10 10.0034",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})))),this.closeIconSlot&&s("slot",{key:"26e4a82b5adf93581dba91602da8819493f75b62",name:"close-icon",slot:"close-icon"}),this.prefixSlot&&s("slot",{key:"de3de9db03aed3ab481b490f7c437523a1313912",slot:"prefix",name:"prefix"}),this.popoverVisible&&s("ks-time-panel",{key:"5b303ee7622a6b31f35c625616be7b76cebc8c85",ref:t=>this.timePanelEl=t,cur:this.cur,isStart:this.cur===0,disabledHours:this.isVisible?this.disabledHours:w,disabledMinutes:this.isVisible?this.disabledMinutes:w,disabledSeconds:this.isVisible?this.disabledSeconds:w,format:this.format,showHour:this.showHour&&this.format.toLocaleLowerCase().includes("h"),showMinute:this.showMinute&&this.format.toLocaleLowerCase().includes("m"),showSecond:this.showHour&&this.format.toLocaleLowerCase().includes("s"),hourStep:this.hourStep,minuteStep:this.minuteStep,secondStep:this.secondStep,isHour12:this.isHour12,onKsChange:t=>{const{detail:i}=t;this.timeValueChange(i)},value:this.panelValue,"data-testid":"picker-index-6mxqZE"}),this.popoverVisible&&s("ks-button",{key:"6a193b99048dab09e1affeaa2bd0c353c3fc0363",slot:"footer",variant:"primary",size:"sm",onClick:()=>{if(this.cur===0&&this.isRange){this.cur=1;this.panelValue=this.dateValue[1]?n.format(this.dateValue[1],this.format):undefined}else{this.popoverVisible=false}},"data-testid":"picker-index-eaKfdx"},h(b.confirm))))}get el(){return a(this)}static get watchers(){return{isRange:["handleIsRangeChange"],value:["handleValueChange"]}}};y([d({slotname:"prefix"})],j.prototype,"prefixSlot",void 0);y([d({slotname:"show-icon"})],j.prototype,"showIconSlot",void 0);y([d({slotname:"close-icon"})],j.prototype,"closeIconSlot",void 0);y([d({slotname:"suffix"})],j.prototype,"suffixSlot",void 0);y([d({slotname:"preset"})],j.prototype,"presetSlot",void 0);y([m()],j.prototype,"value",void 0);j.style=g;export{j as ks_time_picker};