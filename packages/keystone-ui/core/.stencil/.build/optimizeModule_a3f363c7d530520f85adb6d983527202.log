import{r as t,c as i,h as e,H as s,a}from"./p-BVbYP5UG.js";import{d as o}from"./p-O1A-ZSZs.js";import{S as n}from"./p-DtH7945i.js";import{t as h,d as r}from"./p-B9Bv72kO.js";import{s as d}from"./p-BpTTFEEs.js";import{a as c}from"./p-B29l_iU6.js";import{i as f}from"./p-H-KPsjGO.js";import{d as l}from"./p-CqdmgBk0.js";import{V as m}from"./p-DTAuyNBn.js";import{d as p,c as b}from"./p-CZoCRgNL.js";import"@oddbird/popover-polyfill";import"./p-BsdBppw3.js";import"./p-B85MJLTf.js";const u='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}:host{width:fit-content;display:block}[ks-picker-base]::part(wc-input){width:250px}.ks-date-time-range-picker__footer{display:flex;width:100%;justify-content:space-between}.ks-date-time-range-picker__footer__btns{display:flex;gap:var(--ks-spacing-100)}';var k=undefined&&undefined.__decorate||function(t,i,e,s){var a=arguments.length,o=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,e):s,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)if(n=t[h])o=(a<3?n(o):a>3?n(i,e,o):n(i,e))||o;return a>3&&o&&Object.defineProperty(i,e,o),o};const g="MMMM d, yyyy HH:mm:ss";const y="ks-date-time-range-picker";const v=()=>false;const w="00:00:00";const x=class{constructor(e){t(this,e);this.ksChange=i(this,"ksChange",1);this.ksShow=i(this,"ksShow",1);this.ksHide=i(this,"ksHide",1);this.ksVisibleChange=i(this,"ksVisibleChange",1);this.ksClear=i(this,"ksClear",1);this.format=g;this.width=500;this.placement="bottom-start";this.clearable=true;this.showPreset=false;this.showHour=true;this.showMinute=true;this.showSecond=false;this.minuteStep=1;this.hourStep=1;this.secondStep=1;this.timeZoneDisplayPosition="picker";this.showFooter=false;this.valueTime=[w,w];this.isStartTime=true;this.isVisible=false}get locale(){return d.state.config.locale}valueWatcher(t){t||(t=["",""]);const i=[];if(typeof t[0]==="string"){t.forEach?.(((t,e)=>{if(t===""){if(this.dateTimeValue){this.dateTimeValue[e]=undefined}if(this.valueDate){this.valueDate[e]=undefined}this.valueTime[e]=w;return}else{i[e]=l(t).toDate();const s=l(t).hour();const a=l(t).minute();const o=l(t).second();const n=t=>String(t).padStart(2,"0");this.valueDate=i;this.valueTime[e]=`${n(s)}:${n(a)}:${n(o)}`}}))}else if(t[0]instanceof Date){this.valueDate=t;this.valueTime=t.map((t=>o.format(t,"HH:mm:ss")))}else{this.valueDate=t.map((t=>new Date(t)));this.valueTime=t.map((t=>o.format(new Date(t),"HH:mm:ss")))}this.formatValueDisplay()}async closePanel(){this.popperRef?.close()}async openPanel(){this.popperRef?.open()}get timeZoneToday(){const{timezoneOffset:t}=d.state.i18n;const i=new Date;const e=(i.getTimezoneOffset()+t)*60*1e3;const s=new Date(i.getTime()+e);return s}setTodayRange(){const t=this.timeZoneToday;const i=[t,t];this.valueTime=["00:00:00","23:59:59"];i.forEach(((t,e)=>{i[e]=o.parse(this.valueTime[e],"HH:mm:ss",t)}));this.dateTimeRangePanelRef.setActiveDate(t);this.valueDate=i;this.formatValueDisplay();this.emitFormatedDate(i)}formatValueDisplay(){if(!this.format||this.format===g){this.dateTimeValue=this.valueDate&&this.valueDate.map((t=>t?c(t,this.locale):""))}else{this.dateTimeValue=this.valueDate&&this.valueDate.map((t=>t?o.format(t,this.format):""))}}formateDate(t,i){t=t.map(((t,e)=>t?o.parse(i[e],"HH:mm:ss",t):null));if(!this.startDisabled&&!this.endDisabled){t=t.sort(((t,i)=>t?.getTime()-i?.getTime()))}return t}componentWillLoad(){const t=c(o.parse("23:00:00","HH:mm:ss",new Date),this.locale);this.isHour12=this.format&&this.format!==g?this.format.includes("a"):/pm|am/i.test(t);if(this.value){this.valueWatcher(this.value)}}handleValueChange(t){if(!t){if(this.value===undefined){this.dateTimeValue=undefined;this.valueDate=[null,null];this.valueTime=[w,w]}this.ksChange.emit?.(["",""]);this.popperRef?.close?.()}}emitFormatedDate(t){const i=t.map((t=>t?o.format(t,this.format):""));if(t.length===2){this.ksChange.emit(i)}else{this.ksChange.emit(i.concat(""))}}getFooterWidth(){const t=(this.showHour?0:1)+(this.showMinute?0:1)+(this.showSecond?0:1)+(this.isHour12?0:1);return 536-t*65}get startDisabled(){return Array.isArray(this.disabled)?this.disabled[0]:this.disabled}get endDisabled(){return Array.isArray(this.disabled)?this.disabled[1]:this.disabled}render(){return e(s,{key:"bf0407b0adc108e2b2c288f113b80d55cd82d567",dir:r(),"ks-date-range-picker":true},e("ks-picker-base",{key:"0a763afe91d56df74698308244bc36203d5dbe36",exportparts:"field: field",readonly:true,timezone:this.timezone,longTimezone:this.isStartTime?this.longTimezone:"",isRange:true,placeholder:h(p.placeholder),startPlaceholder:this.startPlaceholder||h(p.start),endPlaceholder:this.endPlaceholder||h(p.end),disabled:this.disabled,status:this.status,width:this.width,clearable:this.clearable,value:this.dateTimeValue,placement:this.placement,contentWidth:this.getFooterWidth()+"px",onKsShow:({detail:t})=>{this.ksVisibleChange.emit(true);this.isVisible=true;this.ksShow?.emit?.();if(t===1&&(this.startDisabled||this.dateTimeValue?.[0])){this.isStartTime=false;this.valueDate?.[1]&&this.dateTimeRangePanelRef.setActiveDate(this.valueDate[1])}else if(!this.startDisabled){this.isStartTime=true;this.valueDate?.[0]&&this.dateTimeRangePanelRef.setActiveDate(this.valueDate[0])}this.dateTimeRangePanelRef?.timePanelScrolltoTime()},onKsHide:()=>{this.ksVisibleChange.emit(false);this.isVisible=false;this.ksHide?.emit?.()},onKsClear:()=>{this.ksChange.emit(["",""]);this.ksClear.emit()},onKsChange:({detail:t})=>{this.handleValueChange(t)},popoverRef:t=>this.popperRef=t,timeZoneDisplayPosition:this.timeZoneDisplayPosition,"data-testid":"range-date-time-range-picker-jM1Fne"},this.prefixSlot&&e("slot",{key:"ec53f1dadf89a4136cf77c5b1c1ce283d8ed902c",slot:"prefix",name:"prefix"}),this.showIconSlot&&e("slot",{key:"cddf04f67f4bfbd9976a7432d9f202b0524a55ff",name:"show-icon",slot:"show-icon"}),this.suffixSlot&&e("slot",{key:"73a2541c7ce9917696f86613a4349e3410b48aec",name:"suffix",slot:"suffix"}),this.closeIconSlot&&e("slot",{key:"e0f1d1680e0aa6c579df9abcb3e98444dbc44062",name:"close-icon",slot:"close-icon"}),e("ks-date-time-range-panel",{key:"7f6b2056bfa0ea683bdecbcfbcde85e420b57683",ref:t=>this.dateTimeRangePanelRef=t,isStart:this.isStartTime,onKsDateChange:({detail:t})=>{const i=this.formateDate(t,this.valueTime);if(this.value===undefined){this.valueDate=i;this.formatValueDisplay()}this.emitFormatedDate(i)},onKsTimeChange:t=>{const i=t.detail.map((t=>t||w));const e=this.valueDate&&this.formateDate(this.valueDate,i);if(this.value===undefined){this.valueTime=i;this.valueDate=e;this.formatValueDisplay()}e&&this.emitFormatedDate(e)},value:this.valueDate,disabledDate:this.isVisible?this.disabledDate:v,isHour12:this.isHour12,disabledAm:this.disabledAm,disabledHours:this.isVisible?this.disabledHours:v,disabledMinutes:this.isVisible?this.disabledMinutes:v,disabledSeconds:this.isVisible?this.disabledSeconds:v,hourStep:this.hourStep,minuteStep:this.minuteStep,secondStep:this.secondStep,showHour:this.showHour,showMinute:this.showMinute,showSecond:this.showSecond,"data-testid":"range-date-time-range-picker-vV5RnX"}),e("slot",{key:"ca699ec1106144be71efcef12e5ef2a2ec31caf2",slot:"footer",name:"footer"},e("div",{key:"16f954cbc36878b165e79da84c0dcd0d09d2cf8f",class:`${y}__footer`,style:{justifyContent:this.isStartTime?"end":"space-between",width:this.isStartTime?"fit-content":this.getFooterWidth()-24+"px"}},e("div",{key:"26f78ad3180861254da52248e77f5a6c16b16645"},!this.isStartTime&&e("ks-button",{key:"f1a982a63ff38a06ccd99a60c0e2408c6ac13d3c",size:"sm",onClick:()=>{this.isStartTime=true},disabled:this.startDisabled,"data-testid":"range-date-time-range-picker-eUZLHj"},h(b.back))),e("div",{key:"a5ba938e0aac78b5df3f765754cde92d09c36b3c",class:`${y}__footer__btns`},e("ks-button",{key:"8ba13fb2cdc9b85daf48dc630314bc5d7869af9d",size:"sm",onClick:()=>{this.setTodayRange()},disabled:this.startDisabled||this.endDisabled,"data-testid":"range-date-time-range-picker-8rkX9G"},f(0,"days",this.locale)),e("ks-button",{key:"515f47b7197ec60dfba1ddbca5a82d059c686e4e",variant:"primary",size:"sm",onClick:()=>{this.isStartTime&&!this.endDisabled?this.isStartTime=false:this.popperRef.close()},"data-testid":"range-date-time-range-picker-1xBwYA"},this.isStartTime&&!this.endDisabled?h(b.next):h(b.confirm)))))))}get el(){return a(this)}static get watchers(){return{value:["valueWatcher"]}}};k([n({slotname:"preset"})],x.prototype,"presetSlot",void 0);k([n({slotname:"show-icon"})],x.prototype,"showIconSlot",void 0);k([n({slotname:"close-icon"})],x.prototype,"closeIconSlot",void 0);k([n({slotname:"suffix"})],x.prototype,"suffixSlot",void 0);k([n({slotname:"prefix"})],x.prototype,"prefixSlot",void 0);k([m()],x.prototype,"value",void 0);x.style=u;export{x as ks_date_time_range_picker};