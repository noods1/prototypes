{"version":3,"names":["FormBaseComponent","onKsChangeForForm","detail","this","_provider","_isDetailArgs","value","callbacksFromContext","onValueChange","onKsBlurForForm","onBlur","__decorate","Provide","context","FormContext","prototype","Consume","subscribe","path"],"sources":["src/utils/form/FormBaseComponent.ts"],"sourcesContent":["import { FormContext, FormContextValue } from '@src/context/form-context';\nimport { FormItemValue } from '@src/entities';\nimport { Consume, Provide } from '@src/libs/runtime-context';\nimport { ComponentInterface, Listen, State } from '@stencil/core';\n\nexport abstract class FormBaseComponent<T extends FormItemValue> implements ComponentInterface {\n  abstract ['ks-name']: string;\n\n  connectedCallback?(): void;\n  /**\n   * @locale {en} Used to block subcomponents from getting the form context\n   * @locale {zh} 用于阻止子组件获取到表单上下文\n   */\n  @Provide({\n    context: FormContext,\n  })\n  __contextBlocker: undefined;\n\n  @Consume({\n    context: FormContext,\n    subscribe: true,\n    path: ['_provider'],\n  })\n  _provider: FormContextValue<T>['_provider'];\n  @Consume({\n    context: FormContext,\n    path: ['callbacks'],\n  })\n  callbacksFromContext?: FormContextValue<T>['callbacks'];\n  // prettier-ignore\n  @Consume({\n    context: FormContext,\n    subscribe: true,\n    path: ['value'],\n  })\n  @State() valueFromContext?: FormContextValue<T>['value'];\n  // prettier-ignore\n  @Consume({\n    context: FormContext,\n    subscribe: true,\n    path: ['status'],\n  })\n  @State() statusFromContext: FormContextValue<T>['status'];\n  // prettier-ignore\n  @Consume({\n    context: FormContext,\n    subscribe: true,\n    path: ['disabled'],\n  })\n  @State() disabledFromContext: FormContextValue<T>['disabled'];\n\n  @Listen('ksChange')\n  onKsChangeForForm({ detail }: { detail: T & { _isDetailArgs?: boolean } }) {\n    if (this._provider === 'formItem') {\n      if (detail?._isDetailArgs) {\n        const [value] = (detail || []) as unknown as [T];\n        this.callbacksFromContext?.onValueChange?.(value as T, []);\n      } else {\n        this.callbacksFromContext?.onValueChange?.(detail, []);\n      }\n    }\n  }\n\n  @Listen('ksBlur')\n  onKsBlurForForm() {\n    this.callbacksFromContext?.onBlur?.();\n  }\n}\n"],"mappings":"igBAKsBA,EAAiB,M,yBA+CrC,iBAAAC,EAAkBC,OAAEA,IAClB,GAAIC,KAAKC,YAAc,WAAY,CACjC,GAAIF,GAAQG,cAAe,CACzB,MAAOC,GAAUJ,GAAU,GAC3BC,KAAKI,sBAAsBC,gBAAgBF,EAAY,G,KAClD,CACLH,KAAKI,sBAAsBC,gBAAgBN,EAAQ,G,GAMzD,eAAAO,GACEN,KAAKI,sBAAsBG,U,GAjD7BC,EAAA,CAHCC,EAAQ,CACPC,QAASC,KAEiBd,EAAAe,UAAA,2BAO5BJ,EAAA,CALCK,EAAQ,CACPH,QAASC,EACTG,UAAW,KACXC,KAAM,CAAC,gBAEmClB,EAAAe,UAAA,oBAK5CJ,EAAA,CAJCK,EAAQ,CACPH,QAASC,EACTI,KAAM,CAAC,gBAE+ClB,EAAAe,UAAA,+BAO/CJ,EAAA,CALRK,EAAQ,CACPH,QAASC,EACTG,UAAW,KACXC,KAAM,CAAC,YAEgDlB,EAAAe,UAAA,2BAOhDJ,EAAA,CALRK,EAAQ,CACPH,QAASC,EACTG,UAAW,KACXC,KAAM,CAAC,aAEiDlB,EAAAe,UAAA,4BAOjDJ,EAAA,CALRK,EAAQ,CACPH,QAASC,EACTG,UAAW,KACXC,KAAM,CAAC,eAEqDlB,EAAAe,UAAA,qC","ignoreList":[]}