import{r as e,c as t,h as a,H as i,a as s}from"./p-BVbYP5UG.js";import{a as o}from"./p-Ou74PMQs.js";import{d as r,t as n}from"./p-B9Bv72kO.js";import{S as d}from"./p-DtH7945i.js";import{m as l}from"./p-Brn5wDkJ.js";import{r as c}from"./p-DOsoKeKK.js";import{a as f,b as h,s as b}from"./p-DQMKCe7v.js";import{c as p}from"./p-CZoCRgNL.js";import"@oddbird/popover-polyfill";import"./p-BpTTFEEs.js";import"./p-D7jkzT0S.js";const m='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}:host{--ks-comp-color-overlay-mask:rgba(38, 38, 39, 0.5)}.modal{z-index:1;outline:none}.modal .divider{height:0;opacity:0;transition-property:opacity;transition-duration:150ms;transition-timing-function:var(--ks-transition-easing-standardInOut)}.modal .divider__shown{opacity:1}.modal__underlay{position:fixed;top:0;right:0;bottom:0;left:0;display:flex;opacity:0;pointer-events:none;z-index:1;justify-content:center;align-items:center;inset-block-start:0;inset-inline-start:0}.modal__underlay[visible]{opacity:1;pointer-events:auto}.modal__mask{z-index:1;position:fixed;inset-block:0;inset-inline:0;overflow:hidden;background-color:var(--ks-comp-color-overlay-mask)}.modal__wrapper{display:flex;box-sizing:border-box;flex-direction:column;position:relative;background-color:var(--ks-color-neutral-surface);box-shadow:var(--ks-elevation-shadow-level3);border-radius:var(--ks-border-radius-xl);transform:scale(0.92)}.modal__wrapper--sm{width:480px}.modal__wrapper--md{width:600px}.modal__wrapper--lg{width:840px}.modal__wrapper .modal__close{position:absolute;right:var(--ks-spacing-400);top:var(--ks-spacing-400)}.modal__header{padding:var(--ks-spacing-500) var(--ks-spacing-600)}.modal__header-title{display:flex;flex-direction:column;text-align:start;gap:var(--ks-spacing-100);padding-right:var(--ks-spacing-1000)}.modal__header-title-content{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:var(--ks-text-headlineSm-fontSize);line-height:var(--ks-text-headlineSm-lineHeight);font-weight:var(--ks-text-headlineSm-fontWeight);letter-spacing:var(--ks-text-headlineSm-letterSpacing);font-family:var(--ks-text-headlineSm-fontFamily);color:var(--ks-color-neutral-highOnSurface)}.modal__header-des{display:contents;text-align:start;font-size:var(--ks-text-bodySm-fontSize);line-height:var(--ks-text-bodySm-lineHeight);font-weight:var(--ks-text-bodySm-fontWeight);letter-spacing:var(--ks-text-bodySm-letterSpacing);font-family:var(--ks-text-bodySm-fontFamily);color:var(--ks-color-neutral-onSurface)}.modal__scroll{margin:var(--ks-spacing-400) 0;padding:0 var(--ks-spacing-600);max-height:calc(80vh - 200px)}.modal__body{width:100%;font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily);color:var(--ks-color-neutral-highOnSurface)}.modal__body-container{color:var(--ks-color-neutral-highOnSurface)}.modal__footer{display:flex;justify-content:space-between;align-items:center;gap:var(--ks-spacing-600);padding:var(--ks-spacing-500) var(--ks-spacing-600)}.modal__footer__btns{display:flex;gap:var(--ks-spacing-200)}.modal__footer__other{flex:1}';var k=undefined&&undefined.__decorate||function(e,t,a,i){var s=arguments.length,o=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,a):i,r;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,a,i);else for(var n=e.length-1;n>=0;n--)if(r=e[n])o=(s<3?r(o):s>3?r(t,a,o):r(t,a))||o;return s>3&&o&&Object.defineProperty(t,a,o),o};globalThis.KsUICDN&&(globalThis.KsUICDN.Modal=l);const y="modal";const v=class{watchVisible(e){e?this.open():this.close("manual")}async open(){if(this.innerVisible){return}if(await(this.beforeOpen?.())===false){return}await this.visibleByAnime(true);await(this.afterOpen?.());f(this.el,{eventType:"popup"});h(this.el,{eventType:"popup",reset:true})}async close(e="manual"){if(!this.innerVisible){return}if(e!=="manual"){if(await(this.beforeClose?.(e))===false){return}}await this.visibleByAnime(false);this.ksClose.emit(e);await(this.afterClose?.(e));h(this.el,{eventType:"popup"})}constructor(a){e(this,a);this.ksConfirm=t(this,"ksConfirm",1);this.ksCancel=t(this,"ksCancel",1);this.ksClose=t(this,"ksClose",1);this["ks-name"]="ks-modal";this.innerVisible=false;this.confirmLoading=false;this.cancelLoading=false;this.size="md";this.maskClosable=true;this.confirmable=true;this.cancelable=true;this.closeable=true;this.confirmDisabled=false;this.cancelDisabled=false;this.noHeader=false;this.noFooter=false;this.dividered=false;this.deprecatedDisableTopLayer=false;this.deprecatedZIndexOverride=0;c(this.el)}async confirmHandler(){this.confirmLoading=true;try{const e=await(this.confirmCallback?.());if(e!==false){this.ksConfirm.emit();await this.close("confirm")}}catch{}this.confirmLoading=false;b(this.el,{eventType:"confirm"})}async cancelHandler(){this.cancelLoading=true;try{const e=await(this.cancelCallback?.());if(e!==false){this.ksCancel.emit();await this.close("cancel")}}catch{}this.cancelLoading=false;b(this.el,{eventType:"cancel"})}async closeHandler(){this.cancelLoading=true;await this.close("close");this.cancelLoading=false;b(this.el,{eventType:"close"})}visibleByAnime(e){return new Promise((t=>{o.timeline({targets:this.underlayRef,duration:200,easing:"cubicBezier(0.4, 0, 0.2, 1)",begin:()=>{if(e){this.underlayRef.setAttribute("visible","");this.innerVisible=true;document.body?.classList.add("unscrollable")}},complete:()=>{if(!e){this.underlayRef.removeAttribute("visible");this.innerVisible=false;document.body?.classList.remove("unscrollable")}else{if(this.innerVisible!==this.visible){this.underlayRef.setAttribute("visible","");this.innerVisible=true}}t(e)}}).add({targets:this.underlayRef,opacity:e?[{value:0},{value:1}]:0}).add({targets:this.wrapperRef,scale:e?[{value:.92},{value:1}]:.92,opacity:e?[{value:0},{value:1}]:0},0)}))}componentDidLoad(){this.visible?this.open():this.close("manual");this.cbAfterDidLoad?.()}disconnectedCallback(){document.body?.classList.remove("unscrollable")}render(){const e=this.noHeader||!this.closeable&&!this.titleText&&!this.headerSlots?.length;return a(i,{key:"70240120958720512d28148204ad17cc00292489",dir:r(),"ks-modal":true},a("ks-overlay",{key:"4541b848a2addd13b0fe9aa20e0fbbf264ce58f5",open:this.innerVisible,onClose:this.close.bind(this),deprecatedDisableTopLayer:this.deprecatedDisableTopLayer,deprecatedZIndexOverride:this.deprecatedZIndexOverride,"data-testid":"ks-modal-index-4QLEVG"},a("div",{key:"793184766070cc8edada714a058c8225e67e61c9",ref:e=>this.underlayRef=e,class:`${y}__underlay`},a("div",{key:"31a95e661350259f26273a43520eb18cbce7d554",class:`${y}__mask`,part:"mask",onClick:()=>{this.maskClosable&&!this.cancelDisabled&&this.closeHandler()},"data-testid":"ks-modal-index-rWEpeV"}),a("div",{key:"2787cf9742545892222e85075d6f08802fdace78",dir:r(),class:y,part:"self"},a("slot",{key:"ca253571dd52fa5777227ebedd445b809a503d72",name:"wrapper"},a("div",{key:"9f2e6eef7f995885fe49bcf33d91cc7a5a4a09c3",ref:e=>this.wrapperRef=e,class:`${y}__wrapper ${y}__wrapper--${this.size}`,part:"wrapper"},a("div",{key:"a1c7a1a8af86803ba2d89524ecf4e951355e53a7",class:`${y}__header`,part:"header",style:e?{display:"none"}:{}},a("div",{key:"52c92b33c95fbef702742a526ed2c77685c4fba4",class:`${y}__header-title`},a("div",{key:"eede67c4ac688866c0dcc50dcf325b8d1b6800be",class:`${y}__header-title-content`},a("slot",{key:"1923c76fce5c4c3b49368ccc33c31a36289bbefc",name:"header"},this.titleText)),a("div",{key:"c04f32c422a31f1fb00ebde181d7f00e99d93059",class:`${y}__header-des`},a("slot",{key:"632ce7a4857b8ced3656135728836dc667070ca5",name:"description"},this.descriptionText)))),this.closeable&&a("span",{key:"7176806286ac85153fa9b6554d4c8bb73d80738b",class:`${y}__close`},a("ks-button",{key:"7bb2a018925de7e3e17731d376e680bd78144511",size:"md",variant:"text",shape:"square",disabled:this.cancelLoading||this.cancelDisabled,onClick:this.closeHandler.bind(this),"data-testid":"ks-modal-index-qPKzsp"},a("slot",{key:"002a3d98a9e829e2643a50888a55b4a8f2ee828c",name:"close-btn"},a("ks-icon-close",{key:"cee9f562e3a782eb77fd10c18c186a10c6cfc093"})))),a("ks-divider",{key:"635890bce8c31d3a484400a214c414901a8d4d23",class:{["divider"]:true,["divider__shown"]:this.dividered}}),a("slot",{key:"410266d2c00fb54f20d9eb5b480814bd38c2ffd5",name:"body-container"},a("ks-scrollbar",{key:"dde33164d378a2835724fb23dd6af0335f0bc342",class:`${y}__scroll`,thin:true},a("div",{key:"befa5fe29bdaec300c29055d72eef7ca120d8a9d",class:`${y}__body`,part:"body"},a("slot",{key:"ee6deb496a54c53eddf3ecd844dee05ca56f2282",name:"body"},a("div",{key:"217c80d08add552a35c117d138764fe475b2ef97",class:`${y}__body-container`,part:"body-container"},a("slot",{key:"fad646b17c326c19c6e5e3ce73b394f1a68d8029"},n(p.empty))))))),a("ks-divider",{key:"31e17d0eb6fe71a55de38552d13b87259ca96be3",class:{["divider"]:true,["divider__shown"]:this.dividered}}),!this.noFooter&&a("div",{key:"8656793813c50770b6a8cbe3af981bd8fa923313",class:`${y}__footer`,part:"footer"},a("slot",{key:"e134c3c13c4429da2eef244b512816a8fd25f666",name:"footer"},a("div",{key:"dea2313f872148bf0be9305902f261a18c1cdce7",class:`${y}__footer__other`},a("slot",{key:"ae080df757f52f837f305e3196690d97ed93cb6f",name:"footer-other"})),a("div",{key:"ebdbf473a76e5b37f8a236a34f15878d4ab92dde",class:`${y}__footer__btns`},this.cancelable&&a("ks-button",{key:"cb17fdb699a48d91e2be81e2795b237f9a2b839f",disabled:this.cancelDisabled,loading:this.cancelLoading,onClick:this.cancelHandler.bind(this),"data-testid":"ks-modal-index-sMQyRp"},a("slot",{key:"062a6bb5a196c29a182d154c0b319d3fde5b5f5f",name:"cancel-btn"},this.cancelText??n(p.cancel))),this.confirmable&&a("ks-button",{key:"2968d6cb3652225d40e63c66fcc0f4cce67dcda7",variant:"primary",disabled:this.confirmDisabled,loading:this.confirmLoading,onClick:this.confirmHandler.bind(this),"data-testid":"ks-modal-index-smNjSC"},a("slot",{key:"187911e1f1b5406e09c0fcd974f4c48f126ee509",name:"confirm-btn"},this.confirmText??n(p.confirm))))))))))))}get el(){return s(this)}static get watchers(){return{visible:["watchVisible"]}}};k([d({slotname:"header"})],v.prototype,"headerSlots",void 0);v.style=m;export{v as ks_modal};