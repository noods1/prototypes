{"version":3,"names":["FormContext","createContext"],"sources":["src/context/form-context.ts"],"sourcesContent":["import { createContext } from '@src/libs/runtime-context';\nimport {\n  FormItemValue,\n  FormListField,\n  FormListValue,\n  GeneralFormValue,\n  Status,\n  ValidationStates,\n  WatchCallBack,\n} from '@src/entities';\nimport type { KsFormItem } from '@src/components/ks-form-item';\nimport type { KsFormList } from '@src/components/ks-form-list';\n\nexport interface FormListUtils {\n  /**\n   * @locale {en} Add a new item to the form list.\n   * @locale {zh} 向表单列表添加新项。\n   * @param defaultValue 新增的默认值\n   * @param index 新增的位置\n   * @returns void\n   */\n  add: (defaultValue?: GeneralFormValue, index?: number) => void;\n  /**\n   * @locale {en} Remove items from the form list.\n   * @locale {zh} 从表单列表中移除项。\n   * @param index 移除的项的索引\n   * @returns void\n   */\n  remove: (index: number | number[]) => void;\n  /**\n   * @locale {en} Move items in the form list.\n   * @locale {zh} 移动表单列表中的项。\n   * @param from 要移动的项的索引\n   * @param to 目标位置的索引\n   * @returns void\n   */\n  move: (from: number, to: number) => void;\n  /**\n   * @locale {en} Map the value of the form list to the fields of the form.\n   * @locale {zh} 将表单列表的值映射到表单的字段。\n   * @param value 表单列表值\n   * @returns FormListField[]\n   */\n  _mapValueToFields: (value: FormListValue) => FormListField[];\n}\n\nexport interface FormContextValue<\n  T extends GeneralFormValue = GeneralFormValue,\n  E extends KsFormItem | KsFormList = KsFormItem | KsFormList,\n> {\n  _provider?: E extends KsFormItem ? 'formItem' : E extends KsFormList ? 'formList' : 'form';\n  /**\n   * @locale {en} The prefix path of the form.\n   * @locale {zh} 表单的前缀路径。\n   */\n  _prefixPath: string[];\n  /**\n   * @locale {en} Whether the form is disabled.\n   * @locale {zh} 表单是否禁用。\n   */\n  disabled?: boolean;\n  /**\n   * @locale {en} The validation status of the form.\n   * @locale {zh} 表单的校验状态。\n   */\n  status?: Status;\n  /**\n   * @locale {en} The width px of the label in the form.\n   * @locale {zh} 表单标签的像素宽度。\n   */\n  labelWidth?: number;\n  /**\n   * @locale {en} The label alignment of the form.\n   * @locale {zh} 表单标签的对齐方式。\n   */\n  labelAlign?: 'left' | 'right';\n  /**\n   * @locale {en} The value of the form.\n   * @locale {zh} 表单的值。\n   */\n  value: T;\n  /**\n   * @locale {en} The validation status of the form.\n   * @locale {zh} 表单的校验状态。\n   */\n  validationStates: ValidationStates;\n  /**\n   * @locale {en} callback functions for child components.\n   * @locale {zh} 提供给子组件的回调函数。\n   */\n  callbacks: {\n    /**\n     * @locale {en} The callback function that is called when the form value changes.\n     * @locale {zh} 表单值变化时调用的回调函数。\n     * @param value 表单值\n     * @param valuePath 表单值路径\n     * @param originalPath 触发值变化的原始路径\n     */\n    onValueChange: (value: T, path: string[], originalPath?: string[]) => void;\n    /**\n     * @locale {en} The callback function that is called when the form child blur.\n     * @locale {zh} 表单子组件 blur 时调用的回调函数。\n     * @param originalPath 触发 blur 的原始路径\n     */\n    onBlur: (originalPath?: string[]) => void;\n    /**\n     * @locale {en} The callback function that is called when the form is validated.\n     * @locale {zh} 表单校验时调用的回调函数。\n     * @param path 表单值路径\n     */\n    onValidation: (path?: string[]) => Promise<void>;\n    /**\n     * @locale {en} The callback function that is called when the validation status of the form changes.\n     * @locale {zh} 表单校验状态变化时调用的回调函数。\n     */\n    _onValidationStatesChange: (validationStates: ValidationStates, path?: string[]) => void;\n    /**\n     * @locale {en} Reset the validation status of the form.\n     * @locale {zh} 重置表单的验证状态。\n     * @param path 清空校验路径\n     * @returns void\n     */\n    onResetValidation: (path?: string[]) => void;\n    /**\n     * @locale {en} The callback function that is called when the child component is connected.\n     * @locale {zh} 子组件连接时调用的回调函数。\n     * @param instance 子组件实例\n     * @returns void\n     */\n    _onComponentConnect: (instance: E, path?: string[]) => void;\n    /**\n     * @locale {en} The callback function that is called when the child component is disconnected.\n     * @locale {zh} 子组件断开连接时调用的回调函数。\n     * @param instance 子组件实例\n     * @returns void\n     */\n    _onComponentDisconnect: (instance: E, path?: string[]) => void;\n    /**\n     * @locale {en} The callback function that is called when the path of the child component changes.\n     * @locale {zh} 子组件路径变化时调用的回调函数。\n     */\n    _onPathChange: (instance: E, pathFrom: string[], pathTo: string[]) => void;\n    /**\n     * @locale {en} The callback function that is called when the child component is unsubscribed.\n     * @locale {zh} 子组件主动触发取消订阅的函数。\n     * @returns void\n     */\n    _onComponentUnsubscribe?: () => void;\n    /**\n     * @locale {en} Register watch callback.\n     * @locale {zh} 注册监听回调。\n     */\n    _registerWatch: (path: string[] | string, callback: WatchCallBack, shouldCallImmediately?: boolean) => () => void;\n    /**\n     * @locale {en} Unsubscribe context.\n     * @locale {zh} 取消订阅上下文。\n     */\n    _unsubscribeContext?: T extends FormItemValue ? () => void : never;\n  };\n  /**\n   * @locale {en} Utilities for form list operations.\n   * @locale {zh} 表单列表操作的工具函数。\n   */\n  listUtils?: T extends FormListValue ? FormListUtils : never;\n}\n\nexport const FormContext = createContext<FormContextValue>('form-context');\n"],"mappings":"0CAsKaA,EAAcC,EAAgC,uB","ignoreList":[]}