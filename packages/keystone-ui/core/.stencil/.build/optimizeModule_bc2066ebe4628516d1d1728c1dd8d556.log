import{r as e,c as t,h as r,F as n,H as a,a as o}from"./p-BVbYP5UG.js";import{c as i}from"./p-BLeWSNPN.js";import{d as l}from"./p-O1A-ZSZs.js";import{S as s}from"./p-DtH7945i.js";import{i as c,d}from"./p-B9Bv72kO.js";import{s as p}from"./p-BpTTFEEs.js";import{c as _,b as f,d as h}from"./p-B29l_iU6.js";import{V as m}from"./p-DTAuyNBn.js";import"@oddbird/popover-polyfill";import"./p-B85MJLTf.js";import"./p-BsdBppw3.js";import"./p-H-KPsjGO.js";const b='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}.panel{display:flex;flex-direction:row;box-shadow:var(--ks-size__shadow-sm) var(--ks-color__shadow);border-radius:var(--ks-border-radius-xl);width:fit-content;font-size:var(--ks-size__font-md)}.panel-inner{flex:1}.panel__grid{display:grid;grid-template-columns:repeat(7, 14.2857142857%);place-items:center center;align-content:space-around}.panel__content{padding:8px}.panel-preset{border-right:1px solid var(--ks-color-neutral-fillLow);background-color:var(--ks-color-primary-onFill);padding:var(--ks-spacing-200);min-width:160px;max-height:298px;overflow-y:auto}.panel-preset-item{margin-bottom:18px;cursor:pointer}.panel-preset-item:hover{color:var(--ks-color-primary-onSurface)}.panel__header{display:flex;align-items:center;height:44px;border-bottom:1px solid var(--ks-color-neutral-fillLow)}.panel__header:not(.panel__header--center){padding:0 var(--ks-spacing-400)}.panel__header-content{flex:1;text-align:center}.panel__header-content .panel__header-left{padding-left:4px}.panel__header-content .panel__header-right{padding-right:4px}.panel__header-left,.panel__header-right{display:flex;cursor:pointer}.panel__header-left:hover,.panel__header-right:hover{color:var(--ks-color-primary-onSurface)}.panel__item,.panel__gray-item{width:48px;place-content:center center;cursor:pointer;border-radius:var(--ks-border-radius-md);font-size:var(--ks-size__font-md);text-align:center}.panel__item{border:1px solid transparent;height:36px;box-sizing:border-box;display:flex;align-items:center}.panel__item--active{color:var(--ks-color-primary-onFill);background-color:var(--ks-color-primary-fill)}.panel__item--disabled{color:var(--ks-color-neutral-onSurfaceDisabled);cursor:not-allowed}.panel__item--disabled.panel__item--active{background-color:var(--ks-color-primary-fillDisabled)}.panel[dir=rtl] .panel-preset{border-left:1px solid var(--ks-color__divider-default);border-right-width:0}.panel[dir=rtl] .panel__header-left,.panel[dir=rtl] .panel__header-right{transform:rotate(180deg)}.panel__header-title{display:inline-flex;padding:0 2px;font-size:var(--ks-text-labelLg-fontSize);line-height:var(--ks-text-labelLg-lineHeight);font-weight:var(--ks-text-labelLg-fontWeight);letter-spacing:var(--ks-text-labelLg-letterSpacing);font-family:var(--ks-text-labelLg-fontFamily)}.panel__header-title:hover{color:var(--ks-color-primary-onSurface);cursor:pointer}.panel__header-title:active{color:var(--ks-color-primary-onSurfaceActive)}.panel__header-title-container{display:inline-flex;flex-direction:row}.panel__header-title-container--year-first{flex-direction:row-reverse}.panel__header-icon{padding:2px}.panel__header-icon+.panel__header-icon{padding-left:4px}.panel__header-icon{color:var(--ks-color-neutral-onSurface)}.panel__header-icon:hover{color:var(--ks-color-neutral-onSurfaceHover)}.panel__header-icon:focus,.panel__header-icon:active{color:var(--ks-color-neutral-onSurfaceHover)}.panel__header--center{height:auto;border-bottom:none}.panel__content{display:grid;grid-template-columns:repeat(3, 84px);grid-template-rows:repeat(4, 36px);place-content:space-around space-between;row-gap:var(--ks-spacing-400)}.panel__content-in-range{background-color:var(--ks-color-primary-surface2);border-color:var(--ks-color-primary-surface2);border-top-width:2px;border-top-color:white;border-top-style:solid;border-bottom-width:2px;border-bottom-color:white;border-bottom-style:solid}.panel__content-offset{border-top:1px dashed var(--ks-color-neutral-onSurface);border-bottom:1px dashed var(--ks-color-neutral-onSurface);z-index:3}.panel__content-offset.panel__content-cell-end .panel__item{border-right:1px dashed var(--ks-color-neutral-onSurface)}.panel__content-offset:not(.panel__content-offset--first,.panel__content-offset--last) .panel__item--active-first,.panel__content-offset:not(.panel__content-offset--first,.panel__content-offset--last) .panel__item--active-second{--before-border:1px dashed var(--ks-color-neutral-onSurface) !important;border-top:1px dashed var(--ks-color-neutral-onSurface);border-bottom:1px dashed var(--ks-color-neutral-onSurface)}.panel__content-offset.panel__content-cell-start .panel__item{border-left:1px dashed var(--ks-color-neutral-onSurface)}.panel__content-offset--first:not(.panel__content-cell-end,.panel__content-offset--last)::before{content:"";position:absolute;inset:0 0 0 0;border-radius:4px 0 0 4px;border:1px dashed var(--ks-color-neutral-onSurface);z-index:2;border-right-color:transparent;left:0}.panel__content-offset--first:not(.panel__content-cell-end,.panel__content-offset--last) .panel__item:hover{border-color:transparent}.panel__content-offset--first.panel__content-cell-start::before{left:0}.panel__content-offset--first.panel__content-cell-end:hover .panel__item,.panel__content-offset--first.panel__content-offset--last:hover .panel__item{border:1px dashed var(--ks-color-neutral-onSurface)}.panel__content-offset--first.panel__content-cell-end .panel__item,.panel__content-offset--first.panel__content-offset--last .panel__item{border:1px dashed var(--ks-color-neutral-onSurface)}.panel__content-offset--first:not(.panel__content-cell-end,.panel__content-cell-start,.panel__content-offset--last) .panel__item,.panel__content-offset--first.panel__content-cell-start .panel__item{border-right-color:transparent;border-radius:var(--ks-border-radius-md) 0 0 var(--ks-border-radius-md)}.panel__content-offset .panel__item:not(.panel__content-offset .panel__item--active):hover{color:inherit}.panel__content-offset--last.panel__content-cell-end .panel__item{border-right-color:transparent;border-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0}.panel__content-offset--last:not(.panel__content-cell-start,.panel__content-offset--first)::before{content:"";position:absolute;inset:0 0 0 0;border-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0;border:1px dashed var(--ks-color-neutral-onSurface);z-index:2;border-left-color:transparent;right:0}.panel__content-offset--last:not(.panel__content-cell-start,.panel__content-offset--first).panel__content-cell-end::before{right:0}.panel__content-offset--last{position:relative;z-index:2}.panel__content-offset--last:not(.panel__content-cell-end,.panel__content-cell-start,.panel__content-offset--first) .panel__item{border-left-color:transparent;border-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0}.panel__content-offset--first,.panel__content-offset--last{border:none}.panel__content-cell{text-align:center;display:flex;height:36px;box-sizing:border-box;position:relative;align-items:center;cursor:pointer;justify-content:center;font-size:var(--ks-text-bodySm-fontSize);line-height:var(--ks-text-bodySm-lineHeight);font-weight:var(--ks-text-bodySm-fontWeight);letter-spacing:var(--ks-text-bodySm-letterSpacing);font-family:var(--ks-text-bodySm-fontFamily)}.panel__content-cell--disabled{cursor:not-allowed}.panel__content-cell:not(.panel__content-offset):hover .panel__item:not(.panel__item--disabled,.panel__item--active){background-color:var(--ks-color-neutral-surfaceHover)}.panel__content-cell:not(.panel__content-offset):active .panel__item:not(.panel__item--disabled,.panel__item--active){background-color:var(--ks-color-neutral-surfaceActive)}.panel__content-cell:not(.panel__content-offset) .panel__item--today::after{content:"";position:absolute;bottom:2px;left:50%;transform:translateX(-50%);display:block;background-color:var(--ks-color-neutral-onFill);width:var(--ks-spacing-100);height:var(--ks-spacing-100);border-radius:var(--ks-border-radius-full)}.panel__content-cell:not(.panel__content-offset) .panel__item--today:not(.panel__item--disabled,.panel__item--active,.panel__gray-item){position:relative;color:var(--ks-color-primary-onSurface)}.panel__content-cell:not(.panel__content-offset) .panel__item--today:not(.panel__item--disabled,.panel__item--active,.panel__gray-item)::after{content:"";position:absolute;bottom:2px;left:50%;transform:translateX(-50%);display:block;background-color:var(--ks-color-primary-onSurface);width:var(--ks-spacing-100);height:var(--ks-spacing-100);border-radius:var(--ks-border-radius-full)}.panel__content-cell.panel__content-in-range:not(.panel__content-offset):hover .panel__item:not(.panel__item--disabled,.panel__item--active){background-color:var(--ks-color-primary-surface2)}.panel__content-cell.panel__content-in-range:not(.panel__content-offset):active .panel__item:not(.panel__item--disabled,.panel__item--active){background-color:var(--ks-color-primary-surface2)}.panel__content-cell-start{padding:0;margin-left:0;margin-right:0;padding-right:0;border-radius:var(--ks-border-radius-md) 0 0 var(--ks-border-radius-md)}.panel__content-cell-end{padding:0;margin-right:0;margin-left:0;padding-left:0;border-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0}.panel__content-cell-end.panel__content-offset--first .panel__item,.panel__content-cell-start.panel__content-offset--last .panel__item{border:1px dashed var(--ks-color-neutral-onSurface);border-radius:var(--ks-border-radius-md)}.panel__content-cell-gray{color:var(--ks-color-neutral-onSurfaceDisabled)}.panel__content-cell:not(.panel__content-cell-start) .panel__item--active-second{--before-border:1px solid var(--ks-color-primary-surface2);border-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0}.panel__content-cell:not(.panel__content-cell-start) .panel__item--active-second::before{content:" ";position:absolute;width:2px;height:100%;left:-1px;transform:translateX(-100%);background-color:var(--ks-color-primary-surface2);border-top:var(--before-border);border-bottom:var(--before-border)}.panel__content-cell:not(.panel__content-cell-end) .panel__item--active-first{--before-border:1px solid var(--ks-color-primary-surface2);border-radius:var(--ks-border-radius-md) 0 0 var(--ks-border-radius-md)}.panel__content-cell:not(.panel__content-cell-end) .panel__item--active-first::before{content:" ";position:absolute;width:2px;height:100%;right:-1px;transform:translateX(100%);background-color:var(--ks-color-primary-surface2);border-top:var(--before-border);border-bottom:var(--before-border)}.panel__content-week{font-size:var(--ks-text-labelLg-fontSize);line-height:var(--ks-text-labelLg-lineHeight);font-weight:var(--ks-text-labelLg-fontWeight);letter-spacing:var(--ks-text-labelLg-letterSpacing);font-family:var(--ks-text-labelLg-fontFamily);color:var(--ks-color-neutral-onSurface)}.panel__item--active{position:relative}.panel__item,.panel__gray-item{width:calc(100% - var(--ks-spacing-100));height:calc(100% - var(--ks-spacing-100));box-sizing:border-box;z-index:1;display:flex;align-items:center}';var u=undefined&&undefined.__decorate||function(e,t,r,n){var a=arguments.length,o=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)if(i=e[l])o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o;return a>3&&o&&Object.defineProperty(t,r,o),o};const v="panel";const g=class{constructor(r){e(this,r);this.ksChange=t(this,"ksChange",1);this.ksDateHover=t(this,"ksDateHover",1);this.ksViewDateChange=t(this,"ksViewDateChange",1);this["ks-name"]="ks-multiple-month-range-panel";this.activeDate=this.valueDate?this.valueDate[this.valueDate.length-1]:new Date;this.months=[];this.showYearPicker=false;this.position="left"}valueWatcher(){this.generateDateRange()}get valueDate(){if(typeof this.value==="string"){throw Error("Invalid value, value must be Array")}return(this.value||[]).filter((e=>!!e)).map((e=>{if(typeof e==="string"){return new Date(e)}return e}))}set valueDate(e){this.ksChange?.emit?.(e)}get locale(){return p.state.config.locale}watchStartDate(e,t){if(!l.isSameMonth(e,t)){this.generateDateRange()}}generateDateRange(e){const t=e||this.startDate||this.valueDate[this.valueDate.length-1]||new Date;this.activeDate=t;this.months=l.eachMonthOfInterval({start:l.startOfYear(t),end:l.endOfYear(t)});this.ksViewDateChange?.emit?.(t);this.onviewdatechange?.(t)}componentWillLoad(){this.generateDateRange()}handleShowYearPicker(){this.showYearPicker=true}onYearChange(e){const t=e.detail||[];this.showYearPicker=false;if(t.length===0){return false}const r=t[t.length-1];this.activeDate=new Date(r)}jumpTo(e){const t=this.addDate(e);if(!t){this.generateDateRange()}}addDate(e){if(this.single){this.valueDate=[e];return false}const t=Math.abs(this.offset);if(t>0){this.valueDate=[e,l.subDays(e,-t)];return false}if(this.range){const[t,r]=this.valueDate||[];if(!t&&!r||t&&r){this.valueDate=[e]}else{const n=[t,r,e].filter((e=>!!e));this.valueDate=[l.min(n),l.max(n)];this.flagDate=null}return false}const r=this.valueDate.findIndex((t=>l.isSameMonth(t,e)));if(r<0){this.valueDate=[...this.valueDate,e]}else{const e=this.valueDate;e.splice(r,1);this.valueDate=[...e]}return r>=0}get timeZoneToday(){const{timezoneOffset:e}=p.state.i18n;const t=new Date;const r=(t.getTimezoneOffset()+e)*60*1e3;const n=new Date(t.getTime()+r);return l.startOfDay(n)}headerLayout(e,t){const{left:n,right:a,content:o,extraHeaderClass:l,position:s}=e;return r("div",{class:i(`${v}__header`,`${v}__header--${s}`,{[l]:l}),part:"header"},r("div",{class:`${v}__header-left`,onClick:e=>{e.stopPropagation();t("left")},part:"left","data-testid":"day-multiple-month-range-panel-rf6YNj"},n),r("div",{class:`${v}__header-content`,part:"header-content"},o),r("div",{class:`${v}__header-right`,part:"right",onClick:e=>{e.stopPropagation();t("right")},"data-testid":"day-multiple-month-range-panel-cG9mro"},a))}dateInRange(e,t,r){if(!e||!t||!l.isValid(e)||!l.isValid(t)){return false}const n=t?l.startOfDay(t):t;return l.isBefore(r,e)&&l.isAfter(r,n)||l.isBefore(r,n)&&l.isAfter(r,e)}calculateDateInRange(e){if(this.valueDate.length>=1){const[t,r]=this.valueDate||[];const n=this.flagDate||r;return this.dateInRange(t,n,e)}return false}inOffset(e){if(!this.currentHoverDate){return false}const t=l.subDays(this.currentHoverDate,1);const r=l.subDays(this.currentHoverDate,-Math.abs(this.offset)-1);return this.dateInRange(t,r,e)}renderDayContent(){const e=Math.abs(this.offset);return r(n,null,this.months.map(((t,n)=>{const a=this.calculateDateInRange(t);const o=this.disabledDate?.(t,!this.range,this.valueDate?.[0]);const s=this.valueDate.find((e=>l.isSameMonth(e,t)))||this.flagDate&&l.isSameMonth(this.flagDate,t);return r("div",{part:"content-cell",key:l.getTime(t),onMouseEnter:()=>{this.currentHoverDate=t;this.ksDateHover.emit(t);this.ondatehover?.(t)},class:i(`${v}__content-cell`,{[`${v}__content-cell--disabled`]:o,[`${v}__content-cell-${c()?"start":"end"}`]:(n+1)%7===0,[`${v}__content-cell-${!c()?"start":"end"}`]:n%7===0,[`${v}__content-in-range`]:this.range&&a,[`${v}__content-offset`]:this.inOffset(t),[`${v}__content-offset--${!c()?"first":"last"}`]:this.inOffset(t)&&l.isSameMonth(t,this.currentHoverDate),[`${v}__content-offset--${c()?"first":"last"}`]:this.inOffset(t)&&l.isSameMonth(t,l.subDays(this.currentHoverDate,-e))}),onClick:()=>{if(!o){this.jumpTo(t)}},"data-testid":`day-multiple-month-range-panel-f6WGiY-${l.getTime(t)}`},r("div",{class:i({[`${v}__item`]:true,[`${v}__item--disabled`]:o,[`${v}__item--today`]:l.isSameMonth(this.timeZoneToday,t),[`${v}__item--active-${!c()?"first":"second"}`]:s&&this.range&&(this.valueDate.length>=2&&this.valueDate.findIndex((e=>l.isSameMonth(e,t)))===0||this.valueDate.length===1&&this.flagDate&&(l.isAfter(this.valueDate[0],this.flagDate)&&l.isSameMonth(t,this.flagDate)||l.isBefore(this.valueDate[0],this.flagDate)&&l.isSameMonth(this.valueDate[0],t))),[`${v}__item--active-${c()?"first":"second"}`]:s&&this.range&&(this.valueDate.length>=2&&this.valueDate.findIndex((e=>l.isSameMonth(e,t)))===1||this.valueDate.length===1&&this.flagDate&&(l.isAfter(this.flagDate,this.valueDate[0])&&l.isSameMonth(t,this.flagDate)||l.isBefore(this.flagDate,this.valueDate[0])&&l.isSameMonth(this.valueDate[0],t))),[`${v}__item--active`]:s})},_(l.toDate(t),this.locale)))})))}renderHeader(){const e=f(l.toDate(this.activeDate),this.locale);const t=/^\d+/.test(e);return this.headerLayout({left:this.position==="left"&&r("ks-icon-double-chevron-left",{size:"14",class:`${v}__header-icon`}),right:this.position==="right"&&r("ks-icon-double-chevron-right",{size:"14",class:`${v}__header-icon`}),content:r("div",{class:i(`${v}__header-title-container`,{[`${v}__header-title-container--year-first`]:t})},r("div",{class:`${v}__header-title`,onClick:()=>this.handleShowYearPicker(),"data-testid":"day-multiple-month-range-panel-nxRoAU"},h(l.toDate(this.activeDate),this.locale)))},(e=>{if(e==="left"){this.generateDateRange(l.subYears(this.activeDate,1))}if(e==="right"){this.generateDateRange(l.subYears(this.activeDate,-1))}}))}renderYearPanel(){return r("ks-multiple-year-panel",{value:this.valueDate,startDate:this.activeDate,onKsChange:e=>{this.onYearChange(e)},"data-testid":"day-multiple-month-range-panel-mpiiQ4"})}render(){return r(a,{key:"10f5734c5565fae886d08d65a03717dd593a1fac",dir:d(),"ks-multiple-month-range-panel":true},r("div",{key:"140b538d67a17b4284b68b4e59b654fc861c0a46",dir:d(),class:`${v}`,part:"self"},this.presetSlot&&r("div",{key:"5f8f52e25f9793c57e8f5649a6a2a948f21309e9",class:`${v}-preset`},r("slot",{key:"19f270cda44ae8906638ab79450666a08a7d6ff6",name:"preset"})),r("div",{key:"8182cd8830f210b887e663055a645e6055c7e5c0",class:`${v}-inner`},this.showYearPicker&&this.renderYearPanel(),!this.showYearPicker&&r(n,{key:"ac05ac0f0c068348165e5eb5298738f7f961500e"},this.renderHeader(),r("div",{key:"6b4c5bafe8bdd1663fd99e8791f6efeaf8018d0d",class:`${v}__content`,part:"content"},this.renderDayContent())))))}get el(){return o(this)}static get watchers(){return{value:["valueWatcher"],startDate:["watchStartDate"]}}};u([s({slotname:"preset"})],g.prototype,"presetSlot",void 0);u([m()],g.prototype,"value",void 0);g.style=b;export{g as ks_multiple_month_range_panel};