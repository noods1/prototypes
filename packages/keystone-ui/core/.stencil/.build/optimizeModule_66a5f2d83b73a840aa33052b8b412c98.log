import{r,c as i,h as s,F as e,H as t,a as o}from"./p-BVbYP5UG.js";import{i as l,d as a}from"./p-B9Bv72kO.js";import{s as d}from"./p-DQMKCe7v.js";import{r as n}from"./p-DOsoKeKK.js";import{f as c}from"./p-92SBOqbr.js";import{d as h}from"./p-B0FO8VRg.js";import"@oddbird/popover-polyfill";import"./p-BpTTFEEs.js";import"./p-D53F0nW8.js";const u=(r,i,s)=>(r-i)*100/(s-i);const b=(r,i,s)=>(s-i)*r+i;const f=(r,i)=>r.reduce(((r,s,e)=>{const t=Math.abs(i-s);if(r===null||t<=r.distance){return{distance:t,index:e}}return r}),null)?.index??0;const k='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}:host{display:inline-block;width:100%}.slider{cursor:pointer;position:relative;width:100%;height:4px;padding:6px 0;border-radius:var(--ks-border-radius-md)}.slider__bar,.slider__track{display:block;position:absolute;height:inherit;border-radius:inherit;top:0;bottom:0;margin:auto 0}.slider__bar{width:100%;background-color:var(--ks-color-neutral-surface3)}.slider__track{transition-property:width, left;transition-duration:100ms;transition-timing-function:var(--ks-transition-easing-standardOut)}.slider--primary .slider__track{background-color:var(--ks-color-primary-fill)}.slider--primary .slider__mark--active,.slider--primary .slider__indicator{border-color:var(--ks-color-primary-fill);background-color:var(--ks-color-primary-onFill)}.slider--primary:not(.slider--disabled) .slider__indicator:hover{border-color:var(--ks-color-primary-fillHover)}.slider--primary:not(.slider--disabled) .slider__indicator:active{border-color:var(--ks-color-primary-fillActive)}.slider--primary.slider--disabled .slider__track{background-color:var(--ks-color-primary-fillDisabled)}.slider--primary.slider--disabled .slider__mark--active,.slider--primary.slider--disabled .slider__indicator{border-color:var(--ks-color-primary-fillDisabled)}.slider--support .slider__track{background-color:var(--ks-color-support-fill)}.slider--support .slider__mark--active,.slider--support .slider__indicator{border-color:var(--ks-color-support-fill);background-color:var(--ks-color-support-onFill)}.slider--support:not(.slider--disabled) .slider__indicator:hover{border-color:var(--ks-color-support-fillHover)}.slider--support:not(.slider--disabled) .slider__indicator:active{border-color:var(--ks-color-support-fillActive)}.slider--support.slider--disabled .slider__track{background-color:var(--ks-color-support-fillDisabled)}.slider--support.slider--disabled .slider__mark--active,.slider--support.slider--disabled .slider__indicator{border-color:var(--ks-color-support-fillDisabled)}.slider--neutral .slider__track{background-color:var(--ks-color-neutral-fill)}.slider--neutral .slider__mark--active,.slider--neutral .slider__indicator{border-color:var(--ks-color-neutral-fill);background-color:var(--ks-color-neutral-onFill)}.slider--neutral:not(.slider--disabled) .slider__indicator:hover{border-color:var(--ks-color-neutral-fillHover)}.slider--neutral:not(.slider--disabled) .slider__indicator:active{border-color:var(--ks-color-neutral-fillActive)}.slider--neutral.slider--disabled .slider__track{background-color:var(--ks-color-neutral-fillDisabled)}.slider--neutral.slider--disabled .slider__mark--active,.slider--neutral.slider--disabled .slider__indicator{border-color:var(--ks-color-neutral-fillDisabled)}.slider--success .slider__track{background-color:var(--ks-color-success-fill)}.slider--success .slider__mark--active,.slider--success .slider__indicator{border-color:var(--ks-color-success-fill);background-color:var(--ks-color-success-onFill)}.slider--success:not(.slider--disabled) .slider__indicator:hover{border-color:var(--ks-color-success-fillHover)}.slider--success:not(.slider--disabled) .slider__indicator:active{border-color:var(--ks-color-success-fillActive)}.slider--success.slider--disabled .slider__track{background-color:var(--ks-color-success-fillDisabled)}.slider--success.slider--disabled .slider__mark--active,.slider--success.slider--disabled .slider__indicator{border-color:var(--ks-color-success-fillDisabled)}.slider--warning .slider__track{background-color:var(--ks-color-warning-fill)}.slider--warning .slider__mark--active,.slider--warning .slider__indicator{border-color:var(--ks-color-warning-fill);background-color:var(--ks-color-warning-onFill)}.slider--warning:not(.slider--disabled) .slider__indicator:hover{border-color:var(--ks-color-warning-fillHover)}.slider--warning:not(.slider--disabled) .slider__indicator:active{border-color:var(--ks-color-warning-fillActive)}.slider--warning.slider--disabled .slider__track{background-color:var(--ks-color-warning-fillDisabled)}.slider--warning.slider--disabled .slider__mark--active,.slider--warning.slider--disabled .slider__indicator{border-color:var(--ks-color-warning-fillDisabled)}.slider--error .slider__track{background-color:var(--ks-color-error-fill)}.slider--error .slider__mark--active,.slider--error .slider__indicator{border-color:var(--ks-color-error-fill);background-color:var(--ks-color-error-onFill)}.slider--error:not(.slider--disabled) .slider__indicator:hover{border-color:var(--ks-color-error-fillHover)}.slider--error:not(.slider--disabled) .slider__indicator:active{border-color:var(--ks-color-error-fillActive)}.slider--error.slider--disabled .slider__track{background-color:var(--ks-color-error-fillDisabled)}.slider--error.slider--disabled .slider__mark--active,.slider--error.slider--disabled .slider__indicator{border-color:var(--ks-color-error-fillDisabled)}.slider__mark,.slider__indicator{box-sizing:border-box;position:absolute;top:50%;border-style:solid;border-radius:var(--ks-border-radius-full);transform:translate(-50%, -50%)}.slider__indicator{width:16px;height:16px;border-width:3px;transition-property:left;transition-duration:100ms;transition-timing-function:var(--ks-transition-easing-standardOut)}.slider__indicator .slider__label{top:-26px;color:var(--ks-color-neutral-onSurface);left:50%;transform:translateX(-50%)}.slider__indicator input{display:none}.slider__mark{width:8px;height:8px;border-width:2px;border-color:var(--ks-color-neutral-surface3);background-color:var(--ks-color-neutral-onFill)}.slider__label{position:absolute;top:18px;white-space:nowrap;transform:translateX(-50%);color:var(--ks-color-neutral-highOnSurface);font-size:var(--ks-text-bodySm-fontSize);line-height:var(--ks-text-bodySm-lineHeight);font-weight:var(--ks-text-bodySm-fontWeight);letter-spacing:var(--ks-text-bodySm-letterSpacing);font-family:var(--ks-text-bodySm-fontFamily)}.slider--disabled{cursor:not-allowed}.slider--labeld{margin-bottom:var(--ks-spacing-500)}.slider__tooltip::part(bodywrap){pointer-events:none}';const p="slider";const v=class{componentWillLoad(){if(this.value===undefined){this.currentValue=this.defaultValue}else{this.currentValue=this.value}this.bindMouseMoveSlider=this.handleMouseMoveSlider.bind(this);this.bindMouseUpSlider=this.handleMouseUpSlider.bind(this)}valueWatcher(r){this.currentValue=r}defaultValueWatcher(r){if(this.value===undefined){this.currentValue=r}}constructor(s){r(this,s);this.ksChange=i(this,"ksChange",1);this.ksChangeComplete=i(this,"ksChangeComplete",1);this["ks-name"]="ks-slider";this.dragging=false;this.previousIndex=0;this.currentValue=0;this.__showTooltip=false;this.status="default";this.disabled=false;this.min=0;this.max=100;this.step=1;this.marks=false;this.label=[];this.defaultValue=0;this.tooltipVisible=true;this.tooltipContent=[];this.isHover=false;this.indicatorMouseEnter=h((()=>{if(this.isHover){this.__showTooltip=true}}),200);n(this.el)}getNewValue(r){const{width:i,left:s}=this.sliderRef.getBoundingClientRect();let e=(r-s)/i;if(l()){e=1-e}let t=b(e,this.min,this.max);if(this.step){t=Math.round((t-this.min)/this.step)*this.step+this.min}else{const r=(Array.isArray(this.marks)?this.marks:this.steppedMarks).map((r=>r.value));t=r[f(r,t)]}t=Math.max(this.min,Math.min(t,this.max));let o=0;if(Array.isArray(this.currentValue)){o=this.dragging?this.previousIndex:f(this.currentValue,t)}return{newValue:t,activeIndex:o}}handleMouseUpSlider(r){this.dragging=false;if(this.isHover){this.__showTooltip=true}const{newValue:i,activeIndex:s}=this.getNewValue(r.clientX);if(Array.isArray(this.currentValue)){const r=[...this.currentValue];r.splice(s,1,i);if(this.value===undefined){this.currentValue=r}this.ksChange.emit(r);this.ksChangeComplete?.emit(r);d(this.el,{eventType:"change",componentParams:{value:r}})}else{if(this.value===undefined){this.currentValue=i}this.ksChange.emit(i);this.ksChangeComplete?.emit(i);d(this.el,{eventType:"change",componentParams:{value:i}})}document.removeEventListener("mousemove",this.bindMouseMoveSlider);document.removeEventListener("mouseup",this.bindMouseUpSlider);document.removeEventListener("touchmove",this.bindMouseMoveSlider);document.removeEventListener("touchend",this.bindMouseUpSlider)}handleMouseMoveSlider(r){if(r.buttons===0){return}const{newValue:i,activeIndex:s}=this.getNewValue(r.clientX);if(Array.isArray(this.currentValue)){const r=[...this.currentValue];r.splice(s,1,i);if(this.value===undefined){this.currentValue=r}this.ksChange.emit(r)}else{if(this.value===undefined){this.currentValue=i}this.ksChange.emit(i)}if(!this.dragging){this.previousIndex=s;this.dragging=true}}handleMouseDownSlider(r){r.preventDefault();if(this.disabled){return}this.__showTooltip=false;const{newValue:i,activeIndex:s}=this.getNewValue(r.clientX);if(Array.isArray(this.currentValue)){const r=[...this.currentValue];r.splice(s,1,i);if(this.value===undefined){this.currentValue=r}this.ksChange.emit(r)}else{if(this.value===undefined){this.currentValue=i}this.ksChange.emit(i)}document.addEventListener("mousemove",this.bindMouseMoveSlider);document.addEventListener("mouseup",this.bindMouseUpSlider);document.addEventListener("touchmove",this.bindMouseMoveSlider);document.addEventListener("touchend",this.bindMouseUpSlider)}get trackOffset(){return u(Array.isArray(this.currentValue)?Math.min(...this.currentValue):this.min,this.min,this.max)}get trackWidth(){return u(Array.isArray(this.currentValue)?Math.max(...this.currentValue):this.currentValue,this.min,this.max)-this.trackOffset}renderIndicator(r,i){const e=u(r,this.min,this.max);const t=this.tooltipContent[i]||!isNaN(e)&&e!==Infinity&&c(e,1);const o=this.__showTooltip&&t?true:false;return s("ks-tooltip",{class:`${p}__tooltip`,disabled:!this.tooltipVisible,visible:o,content:t||""},s("span",{onMouseEnter:()=>{this.isHover=true;this.indicatorMouseEnter()},onMouseOut:()=>{this.__showTooltip=false;this.isHover=false},"data-index":i,class:`${p}__indicator`,part:"handle",style:{[l()?"right":"left"]:`${e}%`},"data-testid":"ks-slider-index-44tQGY"},this.label[i]&&this.label[i].show&&s("ks-text",{variant:"labelSm",theme:"neutral",class:`${p}__label`},this.label[i].label),s("input",{type:"range",min:this.min,max:this.max,step:this.step,value:r,"aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":r,"aria-valuetext":r})))}get steppedMarks(){return[...Array(Math.floor((this.max-this.min)/this.step)+1)].map(((r,i)=>({value:this.min+this.step*i})))}renderMarks(r,i){const t=u(r.value,this.min,this.max);const o=Array.isArray(this.currentValue)?r.value>=Math.min(...this.currentValue)&&r.value<=Math.max(...this.currentValue):r.value<=this.currentValue;return s(e,null,s("span",{"data-index":i,class:{[`${p}__mark`]:true,[`${p}__mark--active`]:o},style:{[l()?"right":"left"]:`${t}%`}}),r.label&&s("span",{"data-index":i,class:`${p}__label`,style:{[l()?"right":"left"]:`${t}%`},"aria-hidden":"true"},r.label))}render(){const r=this.status==="default"?"primary":"error";const i={[p]:true,[`${p}--${r}`]:true,[`${p}--disabled`]:this.disabled,[`${p}--labeled`]:Array.isArray(this.marks)&&this.marks.some((r=>r.label))};return s(t,{key:"27fae8bf382c248db8fc44dced3d0d4d0010d772",dir:a(),"ks-slider":true,role:"slider"},s("div",{key:"be5828632adf20ba013258908771c977ec990896",dir:a(),class:i,ref:r=>this.sliderRef=r,onMouseDown:this.handleMouseDownSlider.bind(this),onTouchStart:this.handleMouseDownSlider.bind(this),"data-testid":"ks-slider-index-i2ckxA"},s("span",{key:"a2647d1c1483873c08147b775ece5d3c51b547f1",class:`${p}__bar`}),s("span",{key:"db977e9500fb2ceaa222932e3d111cdfb42a20f3",class:`${p}__track`,style:{[l()?"right":"left"]:`${this.trackOffset}%`,width:`${this.trackWidth}%`}}),typeof this.marks==="boolean"?this.marks&&this.steppedMarks.map(this.renderMarks.bind(this)):this.marks.map(this.renderMarks.bind(this)),typeof this.currentValue==="number"?this.renderIndicator(this.currentValue,0):this.currentValue.map(this.renderIndicator.bind(this))))}get el(){return o(this)}static get watchers(){return{value:["valueWatcher"],defaultValue:["defaultValueWatcher"]}}};v.style=k;export{v as ks_slider};