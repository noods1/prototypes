{"version":3,"names":["WEEKDAY_MAX_SAFE_LENGTH","WEEKDAY_IDEAL_LENGTH","shortWeekdayFormatter","cacheOrUpdate","locale","Intl","DateTimeFormat","weekday","narrowWeekdayFormatter","getLocalizedWeekday","date","format","length","narrowWeekday","i18nCapitalize","localizedMonthFormatter","month","getLocalizedMonth","upperFirst","getLocalizedMonthYear","year","getLocalizedYear","GREGORY_CALENDAR_LOCALE_EXTENSION","dateFormatter","endsWith","day","calendar","hour","minute","second","getLocalizedDate","dateFormatted","getMonth","replace","getLocalizedDateTime","options","showMinute","showSecond","showHour","datetimeFormatter","undefined"],"sources":["src/components/ks-date-picker/utils.ts"],"sourcesContent":["import { cacheOrUpdate } from '@src/utils/cache';\nimport { getMonth, upperFirst } from '@src/utils/calendar';\nimport { i18nCapitalize } from '@src/utils/i18n/utils';\n\nconst WEEKDAY_MAX_SAFE_LENGTH = 4;\nconst WEEKDAY_IDEAL_LENGTH = 2;\n\nconst shortWeekdayFormatter = cacheOrUpdate('en-US', (locale) => new Intl.DateTimeFormat(locale, { weekday: 'short' }));\nconst narrowWeekdayFormatter = cacheOrUpdate(\n  'en-US',\n  (locale) => new Intl.DateTimeFormat(locale, { weekday: 'narrow' }),\n);\n\nexport function getLocalizedWeekday(date: Date, locale = 'en-US') {\n  let weekday = shortWeekdayFormatter(locale).format(date);\n  if (weekday.length >= WEEKDAY_MAX_SAFE_LENGTH) {\n    const narrowWeekday = narrowWeekdayFormatter(locale).format(date);\n    if (!(weekday.length === WEEKDAY_MAX_SAFE_LENGTH && narrowWeekday.length !== WEEKDAY_IDEAL_LENGTH)) {\n      weekday = narrowWeekday;\n    }\n  }\n  weekday = i18nCapitalize(weekday, locale);\n  return weekday;\n}\n\nconst localizedMonthFormatter = cacheOrUpdate('en-US', (locale) => new Intl.DateTimeFormat(locale, { month: 'long' }));\nexport function getLocalizedMonth(date: Date, locale = 'en-US') {\n  return upperFirst(localizedMonthFormatter(locale).format(date), locale);\n}\n\nexport function getLocalizedMonthYear(date: Date, locale = 'en-US') {\n  return new Intl.DateTimeFormat(locale, { year: 'numeric', month: 'long' }).format(date);\n}\n\nexport function getLocalizedYear(date: Date, locale = 'en-US') {\n  return new Intl.DateTimeFormat(locale, { year: 'numeric' }).format(date);\n}\n\nconst GREGORY_CALENDAR_LOCALE_EXTENSION = '-u-ca-gregory';\nconst dateFormatter = cacheOrUpdate('en-US', (locale) => {\n  if (!locale.endsWith(GREGORY_CALENDAR_LOCALE_EXTENSION)) {\n    locale += GREGORY_CALENDAR_LOCALE_EXTENSION;\n  }\n  return new Intl.DateTimeFormat(locale, { year: 'numeric', month: 'short', day: 'numeric', calendar: 'gregory' });\n});\n\ninterface IOption {\n  showMinute?: boolean;\n  showSecond?: boolean;\n  showHour?: boolean;\n}\n\nconst timeFormatter = cacheOrUpdate('en-US', (locale) => {\n  if (!locale.endsWith(GREGORY_CALENDAR_LOCALE_EXTENSION)) {\n    locale += GREGORY_CALENDAR_LOCALE_EXTENSION;\n  }\n  return new Intl.DateTimeFormat(locale, {\n    hour: 'numeric',\n    minute: 'numeric',\n    second: 'numeric',\n    calendar: 'gregory',\n  });\n});\n\nexport function getLocalizedDate(date: Date, locale = 'en-US') {\n  const dateFormatted = dateFormatter(locale).format(date);\n  const month = getMonth(date, locale);\n  // TODO: ru 俄语下会匹配不上\n  return dateFormatted.replace(month, upperFirst(month, locale));\n}\n\nexport function getLocalizedDateTime(\n  date: Date,\n  locale = 'en-US',\n  options: IOption = { showMinute: true, showSecond: false, showHour: true },\n) {\n  const datetimeFormatter = cacheOrUpdate(\n    'en-US',\n    (locale, options: IOption) => {\n      if (!locale.endsWith(GREGORY_CALENDAR_LOCALE_EXTENSION)) {\n        locale += GREGORY_CALENDAR_LOCALE_EXTENSION;\n      }\n      return new Intl.DateTimeFormat(locale, {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: options.showHour ? 'numeric' : undefined,\n        minute: options.showMinute ? 'numeric' : undefined,\n        second: options.showSecond ? 'numeric' : undefined,\n        calendar: 'gregory',\n      });\n    },\n    options,\n  );\n  return datetimeFormatter(locale, options).format(date);\n}\n\nexport function getLocalizedTime(date: Date, locale = 'en-US') {\n  return timeFormatter(locale).format(date);\n}\n"],"mappings":"mHAIA,MAAMA,EAA0B,EAChC,MAAMC,EAAuB,EAE7B,MAAMC,EAAwBC,EAAc,SAAUC,GAAW,IAAIC,KAAKC,eAAeF,EAAQ,CAAEG,QAAS,YAC5G,MAAMC,EAAyBL,EAC7B,SACCC,GAAW,IAAIC,KAAKC,eAAeF,EAAQ,CAAEG,QAAS,a,SAGzCE,EAAoBC,EAAYN,EAAS,SACvD,IAAIG,EAAUL,EAAsBE,GAAQO,OAAOD,GACnD,GAAIH,EAAQK,QAAUZ,EAAyB,CAC7C,MAAMa,EAAgBL,EAAuBJ,GAAQO,OAAOD,GAC5D,KAAMH,EAAQK,SAAWZ,GAA2Ba,EAAcD,SAAWX,GAAuB,CAClGM,EAAUM,C,EAGdN,EAAUO,EAAeP,EAASH,GAClC,OAAOG,CACT,CAEA,MAAMQ,EAA0BZ,EAAc,SAAUC,GAAW,IAAIC,KAAKC,eAAeF,EAAQ,CAAEY,MAAO,W,SAC5FC,EAAkBP,EAAYN,EAAS,SACrD,OAAOc,EAAWH,EAAwBX,GAAQO,OAAOD,GAAON,EAClE,C,SAEgBe,EAAsBT,EAAYN,EAAS,SACzD,OAAO,IAAIC,KAAKC,eAAeF,EAAQ,CAAEgB,KAAM,UAAWJ,MAAO,SAAUL,OAAOD,EACpF,C,SAEgBW,EAAiBX,EAAYN,EAAS,SACpD,OAAO,IAAIC,KAAKC,eAAeF,EAAQ,CAAEgB,KAAM,YAAaT,OAAOD,EACrE,CAEA,MAAMY,EAAoC,gBAC1C,MAAMC,EAAgBpB,EAAc,SAAUC,IAC5C,IAAKA,EAAOoB,SAASF,GAAoC,CACvDlB,GAAUkB,C,CAEZ,OAAO,IAAIjB,KAAKC,eAAeF,EAAQ,CAAEgB,KAAM,UAAWJ,MAAO,QAASS,IAAK,UAAWC,SAAU,WAAY,IAS5FvB,EAAc,SAAUC,IAC5C,IAAKA,EAAOoB,SAASF,GAAoC,CACvDlB,GAAUkB,C,CAEZ,OAAO,IAAIjB,KAAKC,eAAeF,EAAQ,CACrCuB,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRH,SAAU,WACV,I,SAGYI,EAAiBpB,EAAYN,EAAS,SACpD,MAAM2B,EAAgBR,EAAcnB,GAAQO,OAAOD,GACnD,MAAMM,EAAQgB,EAAStB,EAAMN,GAE7B,OAAO2B,EAAcE,QAAQjB,EAAOE,EAAWF,EAAOZ,GACxD,CAEM,SAAU8B,EACdxB,EACAN,EAAS,QACT+B,EAAmB,CAAEC,WAAY,KAAMC,WAAY,MAAOC,SAAU,OAEpE,MAAMC,EAAoBpC,EACxB,SACA,CAACC,EAAQ+B,KACP,IAAK/B,EAAOoB,SAASF,GAAoC,CACvDlB,GAAUkB,C,CAEZ,OAAO,IAAIjB,KAAKC,eAAeF,EAAQ,CACrCgB,KAAM,UACNJ,MAAO,QACPS,IAAK,UACLE,KAAMQ,EAAQG,SAAW,UAAYE,UACrCZ,OAAQO,EAAQC,WAAa,UAAYI,UACzCX,OAAQM,EAAQE,WAAa,UAAYG,UACzCd,SAAU,WACV,GAEJS,GAEF,OAAOI,EAAkBnC,EAAQ+B,GAASxB,OAAOD,EACnD,Q","ignoreList":[]}