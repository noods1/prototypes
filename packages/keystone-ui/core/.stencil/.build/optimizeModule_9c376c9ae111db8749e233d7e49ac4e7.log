import{r as t,c as i,h as s,H as e,a as h}from"./p-BVbYP5UG.js";import{c as n}from"./p-BLeWSNPN.js";import{d as a}from"./p-O1A-ZSZs.js";import{d as o}from"./p-B9Bv72kO.js";import{V as r}from"./p-DTAuyNBn.js";import"@oddbird/popover-polyfill";import"./p-B85MJLTf.js";import"./p-BpTTFEEs.js";const l='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}:host{width:auto;display:flex}.ks-time-panel{flex-grow:1;display:flex;flex-direction:row;padding:var(--ks-spacing-100);padding-bottom:0;width:fit-content;border-radius:var(--ks-border-radius-md);height:260px}.ks-time-panel-minutes,.ks-time-panel-hours,.ks-time-panel-seconds{box-sizing:border-box;flex:1;overflow-y:overlay;padding-bottom:204px;scrollbar-width:none}.ks-time-panel-am{box-sizing:border-box;flex:1;overflow-y:overlay}.ks-time-panel-minutes,.ks-time-panel-seconds,.ks-time-panel-am{border-left:1px solid var(--ks-color-neutral-fillLow)}.ks-time-panel-item{font-size:var(--ks-text-bodySm-fontSize);line-height:var(--ks-text-bodySm-lineHeight);font-weight:var(--ks-text-bodySm-fontWeight);letter-spacing:var(--ks-text-bodySm-letterSpacing);font-family:var(--ks-text-bodySm-fontFamily);font-variant-numeric:lining-nums tabular-nums;height:36px;line-height:36px;text-align:center;position:relative;width:100%;min-width:64px}.ks-time-panel-item--active{color:var(--ks-color-primary-onSurface);background-color:var(--ks-color-primary-surface2)}.ks-time-panel-item:not(.ks-time-panel-item--disable):hover{cursor:pointer;background-color:var(--ks-color-neutral-surfaceHover)}.ks-time-panel-item:not(.ks-time-panel-item--disable):active{cursor:pointer;background-color:var(--ks-color-neutral-surfaceActive)}.ks-time-panel-item--disable{color:var(--ks-color-primary-onSurfaceDisabled);cursor:not-allow}.ks-time-panel-seconds{border-right:none}.ks-time-panel[dir=rtl] .ks-time-panel-minutes,.ks-time-panel[dir=rtl] .ks-time-panel-hours,.ks-time-panel[dir=rtl] .ks-time-panel-seconds{border-right-width:0;border-left:1px solid var(--ks-color-neutral-fillLow)}.ks-time-panel--timeZone{font-size:var(--ks-text-bodySm-fontSize);line-height:var(--ks-text-bodySm-lineHeight);font-weight:var(--ks-text-bodySm-fontWeight);letter-spacing:var(--ks-text-bodySm-letterSpacing);font-family:var(--ks-text-bodySm-fontFamily)}';var d=undefined&&undefined.__decorate||function(t,i,s,e){var h=arguments.length,n=h<3?i:e===null?e=Object.getOwnPropertyDescriptor(i,s):e,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")n=Reflect.decorate(t,i,s,e);else for(var o=t.length-1;o>=0;o--)if(a=t[o])n=(h<3?a(n):h>3?a(i,s,n):a(i,s))||n;return h>3&&n&&Object.defineProperty(i,s,n),n};const c="ks-time-panel";const m=9;const f="HH:mm:ss";const p="00:00:00";const u=class{constructor(s){t(this,s);this.ksChange=i(this,"ksChange",1);this["ks-name"]="ks-time-panel";this.format=f;this.hourStep=1;this.showHour=true;this.showMinute=true;this.showSecond=false;this.minuteStep=1;this.secondStep=1;this.isHour12=false;this.hours=[];this.minutes=[];this.seconds=[];this.ams=[];this.hour=0;this.minute=0;this.second=0;this.am="AM";this.cycleHour=false;this.cycleMinute=false;this.cycleSecond=false;this.is12=this.isHour12;this.SCROLL_DEFAULT_DURATION=120;this.SCROLL_OFFSET_SPACING=36;this.isAnimating=false}watchValue(t,i){if(t!==i){if(!t){this.dateValue=a.parse(p,f,new Date);this.hour=0;this.minute=0;this.second=0;this.am="AM"}else{this.dateValue=a.parse(t,this.format,new Date)}this.gotoTime()}}handleCurChange(){this.dateValue=a.parse(this.value,this.format,new Date);if(!this.value){this.dateValue=new Date}this.gotoTime()}componentWillLoad(){this.is12=this.format.includes("a")||this.isHour12;this.hours=this.generateTime(this.is12?12:24,this.hourStep);this.cycleHour=this.hours.length>m;this.minutes=this.generateTime(60,this.minuteStep);this.cycleMinute=this.minutes.length>m;this.seconds=this.generateTime(60,this.secondStep);this.cycleSecond=this.seconds.length>m;this.ams=["AM","PM"];this.dateValue=this.value?a.parse(this.value,this.format,new Date):a.parse("00:00:00","HH:mm:ss",new Date)}componentDidLoad(){this.gotoTime()}get selectedTime(){return this.value===undefined?a.format(this.dateValue,this.format):this.value}async gotoTime(){if(this.value){const t=a.format(this.dateValue,"a");this.showHour&&(this.hour=this.is12?Number(a.format(this.dateValue,"h"))===12?0:Number(a.format(this.dateValue,"h")):a.getHours(this.dateValue));this.showMinute&&(this.minute=a.getMinutes(this.dateValue));this.showSecond&&(this.second=a.getSeconds(this.dateValue));this.is12&&(this.am=t);this.showHour&&this.cycleHour&&this.scrollTo(this.hourContainerRef,this.hour/this.hourStep);this.showMinute&&this.cycleMinute&&this.scrollTo(this.minuteContainerRef,this.minute/this.minuteStep);this.showSecond&&this.cycleSecond&&this.scrollTo(this.secondContainerRef,this.second/this.secondStep)}else{this.showHour&&this.cycleHour&&this.scrollTo(this.hourContainerRef,this.hour/this.hourStep);this.showMinute&&this.cycleMinute&&this.scrollTo(this.minuteContainerRef,this.minute/this.minuteStep);this.showSecond&&this.cycleSecond&&this.scrollTo(this.secondContainerRef,this.second/this.secondStep)}}generateTime(t,i=1){const s=Array.from(new Array(Math.ceil(t/i)),((s,e)=>t===12&&e===0?12:e*i));return s.length>m?[...s,...s,...s]:s}pickHour(t){const i=this.is12&&this.am==="PM"?t+12:t;if(this.disabledHours?.(i,this.selectedTime,this.isStart)){return}const s=new Date(this.dateValue);s.setHours?.(i);if(this.value===undefined){this.hour=t;this.dateValue=s;this.cycleHour&&this.scrollTo(this.hourContainerRef,t/this.hourStep)}this.dispatchValueChange(s)}pickMinute(t){if(this.disabledMinutes?.(t,this.selectedTime,this.isStart)){return}const i=new Date(this.dateValue);i.setMinutes?.(t);if(this.value===undefined){this.minute=t;this.dateValue=i;this.cycleMinute&&this.scrollTo(this.minuteContainerRef,t/this.minuteStep)}this.dispatchValueChange(i)}pickSecond(t){if(this.disabledSeconds?.(t,this.selectedTime,this.isStart)){return}const i=new Date(this.dateValue);i.setSeconds?.(t);if(this.value===undefined){this.second=t;this.dateValue=i;this.cycleSecond&&this.scrollTo(this.secondContainerRef,t/this.secondStep)}this.dispatchValueChange(i)}pickAm(t){if(this.disabledAm?.(t,this.selectedTime,this.isStart)){return}this.am=t;const i=a.parse(`${this.formatTime(this.is12&&this.hour===0?12:this.hour)}:${this.formatTime(this.minute)}:${this.formatTime(this.second)} ${t}`,"hh:mm:ss a",new Date);if(this.value===undefined){this.dateValue=i}this.dispatchValueChange(i)}formatTime(t){return String(t).padStart(2,"0")}handleScroll(t,i){if(this.isAnimating)return;const s=t.scrollTop;const e=this.SCROLL_OFFSET_SPACING;const h=e*this[`${i}s`].length/3;if(s>=2*h||s===0){t.scrollTop=h}}runScrollAnimationFrame(t,i,s=this.SCROLL_DEFAULT_DURATION){if(s<=0)return;this.isAnimating=true;const e=performance.now();const h=t.scrollTop;const n=i-h;const a=o=>{const r=o-e;const l=Math.min(r/s,1);t.scrollTop=h+n*l;if(l<1&&Math.abs(t.scrollTop-i)>1){requestAnimationFrame(a)}else{t.scrollTop=i;this.isAnimating=false}};requestAnimationFrame(a)}async dispatchValueChange(t){if((!this.showHour||this.hour>=0)&&(!this.showMinute||this.minute>=0)&&(!this.showSecond||this.second>=0)&&(!this.is12||this.am)){this.ksChange.emit(a.format(t,this.format))}}scrollTo(t,i=0,s=this.SCROLL_DEFAULT_DURATION){this.runScrollAnimationFrame(t,this.SCROLL_OFFSET_SPACING*i,s)}render(){return s(e,{key:"15bb434668deb3d824cdbc3b238fb374952a5c1d",dir:o(),"ks-time-panel":true},s("div",{key:"4a2daf3acd5b6e4f55df01b3ae0e1d43ae23b77c",dir:o(),class:`${c}`,part:"self"},this.showHour&&s("div",{key:"ff8532188d45c662e2e731b4b0ea87ad723f526c",onScroll:()=>this.cycleHour&&this.handleScroll(this.hourContainerRef,"hour"),class:`${c}-hours`,ref:t=>this.hourContainerRef=t,"data-testid":"panel-index-qZMqVr"},this.hours.map((t=>s("div",{class:n(`${c}-item`,{[`${c}-item--active`]:this.hour===(this.is12&&t===12?0:t)&&this.hour>=0,[`${c}-item--disable`]:this.disabledHours?.(t,this.selectedTime,this.isStart)}),onClick:this.pickHour.bind(this,this.is12&&t===12?0:t),"data-testid":"panel-index-4UuLor"},a.format((new Date).setHours(t),"HH"))))),this.showMinute&&s("div",{key:"b8526b433a3db5f902a20becf0ae6701fb5a52f2",class:`${c}-minutes`,onScroll:()=>this.cycleMinute&&this.handleScroll(this.minuteContainerRef,"minute"),ref:t=>this.minuteContainerRef=t,"data-testid":"panel-index-r3A7wi"},this.minutes.map((t=>{a.isSameMinute(this.dateValue,t);return s("div",{class:n(`${c}-item`,{[`${c}-item--active`]:this.minute===t&&this.minute>=0,[`${c}-item--disable`]:this.disabledMinutes?.(t,this.selectedTime,this.isStart)}),onClick:this.pickMinute.bind(this,t),"data-testid":"panel-index-ePgydu"},a.format((new Date).setMinutes(t),"mm"))}))),this.showSecond&&s("div",{key:"8dfd917994f274bc4a141f8388f5ae3d654370cc",class:`${c}-seconds`,onScroll:()=>this.cycleSecond&&this.handleScroll(this.secondContainerRef,"second"),ref:t=>this.secondContainerRef=t,"data-testid":"panel-index-kXCXvx"},this.seconds.map((t=>s("div",{class:n(`${c}-item`,{[`${c}-item--active`]:this.second===t&&this.second>=0,[`${c}-item--disable`]:this.disabledSeconds?.(t,this.selectedTime,this.isStart)}),onClick:this.pickSecond.bind(this,t),"data-testid":"panel-index-s5VuCt"},a.format((new Date).setSeconds(t),"ss"))))),this.is12&&s("div",{key:"1021042a5341fb69b0ce539bac7cfed0de430cc8",class:`${c}-am`,ref:t=>this.amContainerRef=t},this.ams.map((t=>s("div",{class:n(`${c}-item`,{[`${c}-item--active`]:t===this.am,[`${c}-item--disable`]:this.disabledAm?.(t,this.selectedTime,this.isStart)}),onClick:this.pickAm.bind(this,t),"data-testid":"panel-index-6gKaCK"},t))))))}get el(){return h(this)}static get watchers(){return{value:["watchValue"],cur:["handleCurChange"]}}};d([r()],u.prototype,"value",void 0);u.style=l;export{u as ks_time_panel};