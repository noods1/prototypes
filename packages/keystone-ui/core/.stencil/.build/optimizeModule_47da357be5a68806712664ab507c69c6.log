import{r as t,h as e,H as i,a as s}from"./p-BVbYP5UG.js";import{C as o}from"./p-B7eN8IFF.js";import{P as r}from"./p-DXVWym72.js";import{F as a}from"./p-lK2WYNKL.js";import{i as n,p as l}from"./p-Cg-hFIOP.js";import{c as h}from"./p-BLeWSNPN.js";import{d as c,t as m}from"./p-B9Bv72kO.js";import{f as d}from"./p-CZoCRgNL.js";import{S as f}from"./p-DtH7945i.js";import{S as p}from"./p-CwVJOw7w.js";import"@oddbird/popover-polyfill";import"./p-BKnx-nkd.js";import"./p-3aNLeb18.js";import"./p-D53F0nW8.js";import"./p-B85MJLTf.js";import"./p-BpTTFEEs.js";const b='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}:host{--ks-form-item-height-xs:26px;--ks-form-item-height-sm:30px;--ks-form-item-height-md:34px;--ks-form-item-height-lg:38px;--ks-form-item-height-xl:42px;--ks-form-item-height-xxl:46px;--ks-form-item-fontSize-xs:12px;--ks-form-item-fontSize-sm:12px;--ks-form-item-fontSize-md:14px;--ks-form-item-fontSize-lg:14px;--ks-form-item-fontSize-xl:16px;--ks-form-item-fontSize-xxl:16px}.form-item{display:flex;gap:var(--ks-spacing-200);flex-direction:column}.form-item__label{display:flex;box-sizing:border-box;gap:8px;position:relative}.form-item__label--optional{color:var(--ks-color-neutral-lowOnSurface)}.form-item__label--empty{display:none}.form-item__control{flex:1 1 auto}.form-item__control__message{min-height:20px;padding:4px 0 8px 0;box-sizing:content-box}.form-item__control__message__text{display:block;color:var(--ks-color-neutral-onSurface)}.form-item__control__message__text--warning{color:var(--ks-color-warning-onSurface)}.form-item__control__message__text--error{color:var(--ks-color-error-onSurface)}.form-item__control__message__icon{display:inline-flex;justify-content:center;align-items:center;width:16px;height:16px;border-radius:var(--ks-border-radius-full);color:var(--ks-color-neutral-onFillLow);background-color:var(--ks-color-neutral-fillLow);margin-right:var(--ks-spacing-100)}.form-item__control__message__icon--warning{color:var(--ks-color-neutral-onFillLow);background-color:var(--ks-color-neutral-fillLow)}.form-item__control__message__icon--error{color:var(--ks-color-error-onFillLow);background-color:var(--ks-color-error-fillLow)}.form-item__control__message__icon--success{color:var(--ks-color-success-onFillLow);background-color:var(--ks-color-success-fillLow)}.form-item--size-md .form-item__label{font-size:var(--ks-form-item-fontSize-md)}.form-item--size-md .form-item__control__message{font-size:calc(var(--ks-form-item-fontSize-md) - 2px);min-height:calc(var(--ks-form-item-height-md) - 14px);padding:4px 0 8px 0}.form-item--size-lg .form-item__label{font-size:var(--ks-form-item-fontSize-lg)}.form-item--size-lg .form-item__control__message{font-size:calc(var(--ks-form-item-fontSize-lg) - 2px);min-height:calc(var(--ks-form-item-height-lg) - 14px);padding:4px 0 8px 0}';var g=undefined&&undefined.__decorate||function(t,e,i,s){var o=arguments.length,r=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)if(a=t[n])r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r;return o>3&&r&&Object.defineProperty(e,i,r),r};const _="form-item";const u=class{constructor(e){t(this,e);this["ks-name"]="ks-form-item";this.__propsReady=new Promise((t=>{this.__propsReadyResolver=t}));this.context={_provider:"formItem",_prefixPath:[],disabled:undefined,value:undefined,validationStates:{[p]:null},callbacks:{onValueChange:(t,e=[],i)=>{const s=n(this.context.value,e,t,{});i=i||[...this._prefixPath,...this._relativePath()];this.callbacksFromContext?.onValueChange(s,this._relativePath(),i)},onBlur:t=>{t=t||[...this._prefixPath,...this._relativePath()];this.callbacksFromContext?.onBlur(t)},onValidation:async(t=[])=>{await this.validate(t||[])},_onValidationStatesChange:(t,e=[])=>{const i=n(this.context.validationStates,e,t);this.callbacksFromContext?._onValidationStatesChange(i,this._relativePath())},onResetValidation:async(t=[])=>{await this.resetValidate(t||[])},_onComponentConnect:(t,e=[])=>{this.callbacksFromContext?._onComponentConnect(t,[...this._relativePath(),...e])},_onComponentDisconnect:(t,e=[])=>{this.callbacksFromContext?._onComponentDisconnect(t,[...this._relativePath(),...e])},_onPathChange:(t,e,i)=>{this.callbacksFromContext?._onPathChange(t,e,i)},_registerWatch:(t,e,i)=>this.callbacksFromContext?._registerWatch(t,e,i),_unsubscribeContext:()=>{this.context={...this.context,_provider:undefined}}}};this.validateMessages=[];this._prefixPath=[];this.labelAlign="right";this.colon=false;this.size="md";this.rules=[];this.required=false;this.trigger="change";this.validateTrigger="change";this.showOption=true;this._disposers=[]}_relativePath({name:t=this.name,_prefixPath:e=this._prefixPath}={}){const i=l(t);if(i.slice(0,e.length).join(".")===e.join(".")){return i.slice(e.length)}else{return i}}updateContextValue(){this.context={...this.context,value:this.valueFromContext}}updateValidationState(){let t;const e=this.validationStateFromContext?.[p]||[];if(e.length){if(e.some((({status:t})=>t==="error"))){t="error"}else if(e.some((({status:t})=>t==="warning"))){t="warning"}else if(e.some((({status:t})=>t==="success"))){t="success"}else{t="default"}}else{t="default"}this.context={...this.context,status:this.validateStatus||t,validationStates:this.validationStateFromContext};this.validateMessages=e.filter((t=>t.status==="error"||t.status==="warning"))}validateStatusChange(){if(this.validateStatus){this.context={...this.context,status:this.validateStatus}}}watchContextPropsChange(){this.context={...this.context,disabled:this.disabledFromContext,labelWidth:this.labelWidthFromContext,labelAlign:this.labelAlignFromContext}}prefixChange(t,e){this.context={...this.context,_prefixPath:[...this._prefixPath,...this._relativePath()]};this.callbacksFromContext?._onPathChange?.(this,[...e,...this._relativePath()],[...t,...this._relativePath()])}nameChange(t,e){this.context={...this.context,_prefixPath:[...this._prefixPath,...this._relativePath()]};this.callbacksFromContext._onPathChange?.(this,[...this._prefixPath,...this._relativePath({name:e})],[...this._prefixPath,...this._relativePath({name:t})])}_collectRules(t){let e;if(this.required&&!this.rules.find((t=>t.required))){e=[{required:true},...this.rules||[]]}else{e=this.rules||[]}return e.filter((e=>{if(t===true){return true}const i=e.trigger||this.validateTrigger;return i===t||Array.isArray(i)&&i.includes(t)}))}_registerDependencies(){if(Array.isArray(this.dependencies)){this.dependencies.forEach((t=>{const e=this.callbacksFromContext._registerWatch(l(t),(t=>{this.validate().catch((()=>{}))}),false);this._disposers.push(e)}))}}_disposeDependencies(){this._disposers.forEach((t=>{t()}))}connectedCallback(){this.__propsReady.then((()=>{this.callbacksFromContext?._onComponentConnect?.(this,this._relativePath());this._registerDependencies()}))}disconnectedCallback(){this.callbacksFromContext._onComponentDisconnect?.(this,this._relativePath());this._disposeDependencies()}componentWillLoad(){this.__propsReadyResolver();this.context={...this.context,_prefixPath:[...this._prefixPath,...this._relativePath()],disabled:this.disabledFromContext,labelWidth:this.labelWidthFromContext,labelAlign:this.labelAlignFromContext,status:this.validateStatus}}componentWillUpdate(){this.__propsReadyResolver()}async validate(t=[]){await(this.callbacksFromContext?.onValidation([...this._relativePath(),...t]))}async resetValidate(t){this.callbacksFromContext?.onResetValidation([...this._relativePath(),...t])}render(){const t=this.labelAlign||this.labelAlignFromContext;const s=this.labelWidth||this.labelWidthFromContext;const o=this.showOption&&!this.required&&!this._collectRules(true).find((t=>t.required));return e(i,{key:"cf426e26c7a127124212d53e41945c58c3be2ee4",dir:c(),"ks-form-item":true},e("div",{key:"eb055521bf252795dcf0b1fdeec7cbd24899ac86",dir:c(),class:h(_,`${_}--size-${this.size}`),part:"self"},(this.label||this.labelSlot)&&e("label",{key:"05fc9757d0ac9f4b7da905ba7bc9843596e1c89e",class:h(`${_}__label`,`${_}__label--align-${t}`),style:{width:`${s}px`},part:"label"},e("slot",{key:"f00b0a3ee7c1b4a3562c705dbbd25821852f0c9f",name:"label"},this.label),this.colon&&":",o&&e("span",{key:"62e31db02b4d144559517226c64b20a12bcc0b19",class:`${_}__label--optional`},` Â· ${m(d.optional)}`)),e("div",{key:"96793dd93080edd06156b305519c15f609e05437",class:h(`${_}__control`),part:"control"},e("slot",{key:"5b5044bf5ea2077de6bb626269e35e54792b5782"}),this.validateMessages.length&&e("div",{key:"f38199c591eda7769c8891a183af78d11cbd0746",class:h(`${_}__control__message`),part:"control-message"},this.validateMessages.map((t=>{if(t.status==="error"||t.status==="warning"){return e("span",{class:h(`${_}__control__message__text`,{[`${_}__control__message__text--warning`]:t.status==="warning",[`${_}__control__message__text--error`]:t.status==="error"})},e("ks-status-message",{variant:t.status,richTextString:t.message,cta:t.cta}))}})))||null)))}get el(){return s(this)}static get watchers(){return{valueFromContext:["updateContextValue"],validationStateFromContext:["updateValidationState"],validateStatus:["validateStatusChange"],disabledFromContext:["watchContextPropsChange"],labelWidthFromContext:["watchContextPropsChange"],labelAlignFromContext:["watchContextPropsChange"],_prefixPath:["prefixChange"],name:["nameChange"]}}};g([r({context:a,callback:t=>{t?.dispatchEvent?.(new CustomEvent("context-change",{detail:t}))}})],u.prototype,"context",void 0);g([o({context:a,subscribe:true,path(){return["value",...this._relativePath()]}})],u.prototype,"valueFromContext",void 0);g([o({context:a,subscribe:true,path(){return["validationStates",...this._relativePath()]}})],u.prototype,"validationStateFromContext",void 0);g([o({context:a,subscribe:true,path:["_prefixPath"]})],u.prototype,"_prefixPath",void 0);g([o({context:a,subscribe:true,path:["disabled"]})],u.prototype,"disabledFromContext",void 0);g([o({context:a,subscribe:true,path:["labelAlign"]})],u.prototype,"labelAlignFromContext",void 0);g([o({context:a,subscribe:true,path:["labelWidth"]})],u.prototype,"labelWidthFromContext",void 0);g([o({context:a,subscribe:false,path:["callbacks"]})],u.prototype,"callbacksFromContext",void 0);g([f({slotname:"label"})],u.prototype,"labelSlot",void 0);u.style=b;export{u as ks_form_item};