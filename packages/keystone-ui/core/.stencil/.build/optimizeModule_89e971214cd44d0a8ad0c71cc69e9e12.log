import{r as t,c as e,h as i,H as s,a}from"./p-BVbYP5UG.js";import{S as o}from"./p-DtH7945i.js";import{o as r}from"./p-CfzXkFbX.js";import{d as n,t as l,f as d}from"./p-B9Bv72kO.js";import{c as h}from"./p-BLeWSNPN.js";import{i as c,f as p}from"./p-hxRNlEql.js";import{F as f}from"./p-C5l2lh22.js";import{V as m}from"./p-DTAuyNBn.js";import{r as u}from"./p-DOsoKeKK.js";import{s as b,a as k,b as g}from"./p-DQMKCe7v.js";import{g as y}from"./p-CZoCRgNL.js";import{F as v}from"./p-CkSrI1o0.js";import{u as x}from"./p-CQbeJEKn.js";import"@oddbird/popover-polyfill";import"./p-BpTTFEEs.js";import"./p-B85MJLTf.js";import"./p-BnhE4z92.js";import"./p-lK2WYNKL.js";import"./p-BKnx-nkd.js";import"./p-B7eN8IFF.js";import"./p-DXVWym72.js";import"./p-3aNLeb18.js";import"./p-D53F0nW8.js";import"./p-DiK-HNtI.js";import"./p-DLGSjaFz.js";import"./p-DY__klQW.js";const _='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}:host{display:inline-block}.input-selector{display:flex;align-items:flex-start;overflow:none;position:relative;width:100%;line-height:1;transition:all ease-in-out 0.1s;box-sizing:border-box;cursor:pointer}.input-selector:not(.input-selector__disabled) [ks-input]::part(content){cursor:pointer}.input-selector:not(.input-selector__disabled) [ks-input]::part(input){cursor:pointer}.input-selector__suffix{display:flex;flex-direction:row;gap:var(--ks-spacing-200)}.input-selector__suffix[dir=ltr]{margin-right:calc(var(--ks-spacing-100) - 1px)}.input-selector__suffix[dir=rtl]{margin-left:calc(var(--ks-spacing-100) - 1px)}.input-selector .icon{transform:rotate(0);transition:transform 0.15s;}.input-selector .icon-down{transform:rotate(-180deg);transition:transform 0.15s;}';var w=undefined&&undefined.__decorate||function(t,e,i,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s,r;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)if(r=t[n])o=(a<3?r(o):a>3?r(e,i,o):r(e,i))||o;return a>3&&o&&Object.defineProperty(e,i,o),o};const C="input-selector";const S=t=>({label:t.content,key:t.id,disabled:t.disabled});const z=class extends v{watchValueChange(t){if(!this.selectedOptions){this.renderValue=Array.isArray(t)?this.getValueItemList(t):this.getValueItemList([t])}}watchOptionChange(t){this.renderValue=t}watchDataSourceChange(){if(this.value!==undefined){this.watchValueChange(this.value)}else if(this.defaultValue!==undefined){this.watchValueChange(this.defaultValue)}}async open(){if(!this.disabled){this.dropdownVisible=true;this.ksVisibleChange.emit(true)}}async close(){this.dropdownVisible=false;this.ksVisibleChange.emit(false)}constructor(s){super();t(this,s);this.ksInputChange=e(this,"ksInputChange",1);this.ksRemove=e(this,"ksRemove",1);this.ksChange=e(this,"ksChange",1);this.ksKeyChange=e(this,"ksKeyChange",1);this.ksVisibleChange=e(this,"ksVisibleChange",1);this.ksSearchChange=e(this,"ksSearchChange",1);this.ksTabsChange=e(this,"ksTabsChange",1);this["ks-name"]="ks-input-selector";this.size="md";this.type="text";this.clearable=false;this.isMultiple=false;this.searchPlaceholder="";this.searchable=false;this.dropdownWidth="auto";this.virtual=false;this.suffix="";this.loadFailedOptions={};this.__internal_bridged_dynamic_slot_render=false;this.showAvatar=false;this.wrapWithSlot=(t,e)=>e;this.loadItems=false;this.loading=false;this.loadFailed=false;this.listAutoHeight=false;this.overlayHeight={max:381};this.focus=false;this.placeholderShowable=true;this.composition=false;this.dropdownVisible=false;this.renderValue=[];this.renderVisItem=[];this._eventListenerEstablished=false;this._onDropMenuItemUpdate=t=>{this.el.dispatchEvent(new CustomEvent("dropMenuItemUpdate",t));this.renderVisItem=t.detail.items||[]};this.getValueItem=t=>{let e;if(this.dataSource?.type==="list"){for(const i of this.dataSource.items){if(i.type==="single"){if(i.id===t){e=i;break}}else{for(const s of i.children){if(s.id===t){e=s;break}}}}}else if(this.dataSource?.type==="tabs"){this.dataSource.tabs.forEach((i=>{for(const s of i.items){if(s.type==="single"){if(s.id===t){e=s;break}}else{for(const i of s.children){if(i.id===t){e=i;break}}}}}))}return e?{key:e.id,label:e.content,disabled:e.disabled}:undefined};this.getValueItemList=t=>{const e=[];if(this.dataSource?.type==="list"){for(const i of this.dataSource.items){if(i.type==="single"){if(t.includes(i.id)){e.push({key:i.id,label:i.content,disabled:i.disabled})}}else{for(const s of i.children){if(t.includes(s.id)){e.push({key:s.id,label:s.content,disabled:i.disabled})}}}if(e.length===t.length){break}}}else if(this.dataSource?.type==="tabs"){this.dataSource.tabs.forEach((i=>{for(const s of i.items){if(s.type==="single"){if(t.includes(s.id)){e.push({key:s.id,label:s.content,disabled:s.disabled})}}else{s.children.forEach((i=>{if(t.includes(i.id)){e.push({key:i.id,label:i.content,disabled:s.disabled})}}))}if(e.length===t.length){break}}}))}return x(e,"key")};this.renderFieldsPresenter=()=>i("ks-fields-presenter",{exportparts:"field: field",width:this.width,value:this.renderValue,size:this.size,onClick:()=>{if(this.disabled){return}this.inputEl?.focus?.()},focusElement:this.dropdownVisible,status:this.status,placeholder:this.placeholder??l(y.placeholder),clearable:this.clearable,onKsChange:t=>{const{detail:e}=t;if(this.value===undefined){this.renderValue=e}const i=e.map((t=>t.key));if(this.isMultiple){this.ksChange.emit(i)}else{this.ksChange.emit(i[0]||"")}},onKsRemove:t=>{const{detail:e}=t;const i=e.map((t=>t.key));if(this.isMultiple){this.ksRemove.emit(i)}else{this.ksRemove.emit(i[0]||"")}},disabled:this.disabled,renderTag:!this.isMultiple?t=>i("ks-text",{style:{[`margin-${n()==="ltr"?"left":"right"}`]:`var(--ks-spacing-${this.size==="md"?200:100})`},dir:n(),ellipsis:{tooltip:true,maxline:1},variant:this.size==="md"?"bodySm":"labelSm"},t.label):undefined,"data-testid":"ks-input-selector-index-ovQ4jw"},this.prefixSlot&&i("slot",{slot:"prefix",name:"prefix"}),i("div",{slot:"suffix",dir:n(),class:h(`${C}__suffix`)},i("slot",{name:"suffix"},this.suffix),i("ks-icon-chevron-up",{size:`${this.size==="md"?16:14}`,class:h("icon",{["icon-down"]:!this.dropdownVisible})})),this.defaultSlot&&i("slot",null));u(this.el)}static __internal_renderDynamicSlots(t,e,i,s=""){return c(t,e,i,s)}renderSlot(){const t=[];const e=(t,e,s,a)=>{const o=`slot-${t}-${e}${s?"-"+s:""}${a?"-"+a:""}`;return i("slot",{key:o,name:o,slot:o,"data-testid":`ks-input-selector-index-fnTrNY-${o}`})};const s=(t,e)=>{const s=`slot-${t}-${e}`;return i("slot",{key:s,name:s,slot:s,"data-testid":`ks-input-selector-index-fnTrNY-${s}`})};const a=(i,s)=>{const a=[{renderFn:i.renderContent,type:"content"},{renderFn:i.renderOptions?.description,type:"des"},{renderFn:i.renderOptions?.popover?.render,type:"pop"},{renderFn:i.renderOptions?.extra,type:"extra"}];a.forEach((({renderFn:a,type:o})=>{if(typeof a==="function"){t.push(e(o,i.id,i.groupId,s))}}))};const o=e=>{const i=[{renderFn:e.avatarIcon,type:"avatar-icon"}];i.forEach((({renderFn:i,type:a})=>{if(typeof i==="function"){t.push(s(a,e.id))}}))};const r=(e,s)=>{if(typeof e.renderTitle==="function"){const a=`slot-title-${e.id}${s?"-"+s:""}`;t.push(i("slot",{key:a,name:a,slot:a,"data-testid":`ks-input-selector-index-7EqYBq-${a}`}))}};const n=(t,e)=>{if(t.type==="group"){o(t);r(t,e);t.children.forEach((t=>{a(t,e)}))}else{a(t,e)}};const l=t=>{let e=[];if(this.virtual){const i=p(t);e=i.filter((t=>typeof t!=="string"&&this.renderVisItem.includes(t?.id)))}else{e=t}return e};if(this.dataSource?.type==="list"){const t=l(this.dataSource?.items);t.forEach((t=>{n(t)}))}else{this.dataSource?.tabs.forEach((e=>{if(typeof e.renderTab==="function"){t.push(i("slot",{name:`slot-tab-${e.tabId}`,slot:`slot-tab-${e.tabId}`}))}const s=l(e.items);s.forEach((t=>{n(t,e.tabId)}))}))}return t}watchDefaultValueChange(t){if(this.value===undefined){this.watchValueChange(t)}}toggleFocusState(){this.focus=false;r.off(this.toggleFocusState.bind(this))}componentWillLoad(){if(this.selectedOptions){this.renderValue=this.selectedOptions}else if(this.defaultValue!==undefined&&this.value===undefined){this.renderValue=Array.isArray(this.defaultValue)?this.getValueItemList(this.defaultValue):this.getValueItemList([this.defaultValue])}else{this.renderValue=Array.isArray(this.value)?this.getValueItemList(this.value):this.getValueItemList([this.value])}}componentDidLoad(){this._eventListenerEstablished=true;this.dropdownEl.addEventListener("dropMenuItemUpdate",this._onDropMenuItemUpdate)}connectedCallback(){super.connectedCallback?.();if(this._eventListenerEstablished){this.dropdownEl.addEventListener("dropMenuItemUpdate",this._onDropMenuItemUpdate)}}disconnectedCallback(){this.dropdownEl.removeEventListener("dropMenuItemUpdate",this._onDropMenuItemUpdate)}render(){const t=this.renderValue?this.renderValue.map((t=>t.key)):[];const e=this.dropdownWidth==="auto"?this.width!=="auto"?this.width:this.size==="sm"?"144px":"auto":this.dropdownWidth;const a=this.width||"100%";return i(s,{key:"500ac63f1933662ed20fabe174af4826a5df2b6f",dir:n(),"ks-multiple-input":true,style:{width:a}},i("ks-dropdown-menu",{key:"d4821d1c5025db414cfc9a59e7fdc9ba97e505a0",class:{[`${C}__dropdown-with-loadMore`]:Boolean(this.loadMore)},estimatedItemHeight:this.estimatedItemHeight,ref:t=>this.dropdownEl=t,virtual:this.virtual,dataSource:this.dataSource,searchValue:this.searchValue,searchable:this.searchable,search:this.search,value:t,activeTabId:this.activeTabId,loading:this.loading,loadItems:this.loadItems,wrapWithSlot:this.wrapWithSlot,setDynamicRenderDeps:this.setDynamicRenderDeps,listAutoHeight:this.listAutoHeight,overlayHeight:this.overlayHeight,width:e,onKsTabsChange:({detail:t})=>this.ksTabsChange.emit(t),searchPlaceholder:this.searchPlaceholder,loadFailed:this.loadFailed,loadFailedOptions:this.loadFailedOptions,onKsSearchChange:({detail:t})=>this.ksSearchChange.emit(t),onKsVisibleChange:({detail:t})=>{if(this.disabled){return}this.dropdownVisible=t;this.ksVisibleChange.emit(t);if(t){k(this.el,{eventType:"popup"});g(this.el,{eventType:"popup",reset:true})}else{g(this.el,{eventType:"popup"})}},onKsValueChange:({detail:t})=>{const e=t.map(S);if(!this.isMultiple){this.dropdownVisible=false;if(e[0]){if(typeof this.value==="undefined"){this.renderValue=e}this.ksChange.emit(e[0].key)}}else{if(typeof this.value==="undefined"){this.renderValue=e}this.ksChange.emit(e.map((t=>t.key)))}b(this.el,{eventType:"change",componentParams:{value:e}})},__internal_bridged_dynamic_slot_render:true,onKsKeyChange:({detail:t})=>{this.ksKeyChange.emit(t)},onKsHitBottom:({detail:t})=>{b(this.el,{eventType:"scroll",subEventType:"hitBottom"});this.loadMore?.(t)},visible:this.dropdownVisible,isMultiple:this.isMultiple,"data-testid":"ks-input-selector-index-jrakkc"},i("slot",{key:"13ccb61c366a644ecbbb0f571b51701651b54d42",name:"field"},i("div",{key:"32466b123677e584046668e367a45fcc66a38401",class:h(C,{[`${C}__disabled`]:this.disabled}),style:{width:this.width}},this.renderFieldsPresenter())),this.headerSlot&&i("slot",{key:"acf35f624d2549c4eb072665d18b445b4e4168a4",name:"header",slot:"header"}),this.listHeaderSlot&&i("slot",{key:"13082e5ca920d185ab54aa456835d79722e57e18",name:"listHeader",slot:"listHeader"}),this.footerSlot&&i("slot",{key:"748dd79abe0bbc85880273be651d1920c733797c",name:"footer",slot:"footer"}),this.emptySlot&&i("slot",{key:"b7882496543bf8a54b912b75881278cc19e009d8",name:"empty",slot:"empty"}),this.errorSlot&&i("slot",{key:"fddf1c7991018a598d2d6f59f3b25f3aa8da1117",name:"error",slot:"error"}),this.loadFailCtasSlot&&i("slot",{key:"dde4a6a303ae6d32358bf1720ffee25bf59f1a4a",name:"loadFailCtas",slot:"loadFailCtas"}),this.renderSlot()))}get el(){return a(this)}static get watchers(){return{value:["watchValueChange"],selectedOptions:["watchOptionChange"],dataSource:["watchDataSourceChange"],defaultValue:["watchDefaultValueChange"]}}};w([f()],z.prototype,"status",void 0);w([o({slotname:"suffix"})],z.prototype,"suffixSlot",void 0);w([o({slotname:"prefix"})],z.prototype,"prefixSlot",void 0);w([o({slotname:"empty"})],z.prototype,"emptySlot",void 0);w([o({slotname:"footer"})],z.prototype,"footerSlot",void 0);w([o({slotname:"header"})],z.prototype,"headerSlot",void 0);w([o({slotname:"listHeader"})],z.prototype,"listHeaderSlot",void 0);w([o({slotname:"_default"})],z.prototype,"defaultSlot",void 0);w([o({slotname:"error"})],z.prototype,"errorSlot",void 0);w([o({slotname:"loadFailCtas"})],z.prototype,"loadFailCtasSlot",void 0);w([m(),f()],z.prototype,"value",void 0);w([f()],z.prototype,"disabled",void 0);z.style=_;const j='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}.space{display:inline-flex;box-sizing:border-box;width:100%}.space--horizontal{flex-direction:row}.space--horizontal.space--compact ::slotted(*){--ks-comp-space__item-radius:0}.space--horizontal.space--compact ::slotted(:first-child){--ks-comp-space__item-radius:var(--ks-border-radius-md) 0 0 var(--ks-border-radius-md)}.space--horizontal.space--compact ::slotted(:last-child){--ks-comp-space__item-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0}.space--horizontal.space--compact ::slotted(:last-child:first-child){--ks-comp-space__item-radius:var(--ks-border-radius-md)}.space--horizontal.space--compact ::slotted(:not(:first-child)){--ks-comp-space__item-margin-inline-start:-1px}.space--horizontal.space--compact[dir=rtl] ::slotted(:first-child){--ks-comp-space__item-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0}.space--horizontal.space--compact[dir=rtl] ::slotted(:last-child){--ks-comp-space__item-radius:var(--ks-border-radius-md) 0 0 var(--ks-border-radius-md)}.space--vertical{flex-direction:column}.space--vertical.space--compact ::slotted(*){--ks-comp-space__item-radius:0;width:100%}.space--vertical.space--compact ::slotted(:first-child){--ks-comp-space__item-radius:var(--ks-border-radius-md) var(--ks-border-radius-md) 0 0}.space--vertical.space--compact ::slotted(:last-child){--ks-comp-space__item-radius:0 0 var(--ks-border-radius-md) var(--ks-border-radius-md)}.space--vertical.space--compact ::slotted(:not(:first-child)){margin-top:-1px !important;position:relative}';const M="space";const F=class{constructor(e){t(this,e);this["ks-name"]="ks-space";this.direction="horizontal"}render(){const t=h([`${M}`,`${M}--${this.direction}`],{[`${M}--compact`]:this.compact});const e={gap:this.compact?"none":d(this.gap)};return i(s,{key:"462699a691938c912fc0dc06e9f5b18ba6e9fcd1","ks-avatar":true},i("div",{key:"2b787b2f0841d212283e91421456739618391685",class:t,style:e,dir:n()},i("slot",{key:"8f153f439d4020bd3f16d10a1c725d6ddef709bc"})))}};F.style=j;export{z as ks_input_selector,F as ks_space};