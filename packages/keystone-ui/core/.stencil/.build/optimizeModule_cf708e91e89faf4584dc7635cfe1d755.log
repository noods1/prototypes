import{r as a,h as t,H as r,c as e}from"./p-BVbYP5UG.js";import{d as o}from"./p-B9Bv72kO.js";import{d as n}from"./p-O1A-ZSZs.js";import{s as i}from"./p-BpTTFEEs.js";import{b as l,c as s}from"./p-BsdBppw3.js";import{I as d}from"./p--5e5wlxs.js";import{g as c}from"./p-H-KPsjGO.js";import{d as h}from"./p-CqdmgBk0.js";import"@oddbird/popover-polyfill";import"./p-B85MJLTf.js";const m=(a,t)=>(n.isAfter(t,a.start)||n.isSameDay(t,a.start))&&(n.isBefore(t,a.end)||n.isSameDay(t,a.end));const p=(a,t,r=1)=>n.isSameDay(t,a.start)||r===n.getDay(t)&&m(a,t);const f=(a,t,r,e)=>n.areIntervalsOverlapping({start:a,end:t},{start:r,end:e})||n.isSameDay(a,e)||n.isSameDay(r,t);const v=(a,t=0)=>a.sort(((a,r)=>n.differenceInMilliseconds(n.max([t,a.start]),n.max([t,r.start]))||n.differenceInMilliseconds(r.end,a.end)));class u{constructor(){this.min=-1;this.max=-1;this.groups=[]}reset(){this.groups=[];this.min=this.max=-1}setColumnCount(){this.groups.forEach((a=>{a.visuals.forEach((a=>{a.columnCount=this.groups.length}))}))}getOpenGroup(a,t){for(let r=0;r<this.groups.length;r++){const e=this.groups[r];let o=false;if(f(a,t,e.start,e.end)){for(let r=0;r<e.visuals.length;r++){const n=e.visuals[r];const i=n.event.start;const l=n.event.end;if(f(a,t,i,l)){o=true;break}}}if(!o){return r}}return-1}getEventVisual(a,t,r){if(r===0){this.reset()}const e=v(a,t).map((a=>({event:a,columnCount:0,column:0})));e.forEach((a=>{const{start:t}=a.event;const{end:r}=a.event;if(this.groups.length>0&&!f(t,r,this.min,this.max)){this.setColumnCount();this.reset()}let e=this.getOpenGroup(t,r);if(e===-1){e=this.groups.length;this.groups.push({start:t,end:r,visuals:[]})}const o=this.groups[e];o.visuals.push(a);o.start=n.min([o.start,t]).getTime();o.end=n.max([o.end,r]).getTime();a.column=e;if(this.min===-1){this.min=t;this.max=r}else{this.min=n.min([this.min,t]);this.max=n.max([this.max,r])}}));this.setColumnCount();return e}}const b='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}.calendar-event{z-index:1;height:20px;overflow:hidden;position:relative;box-sizing:border-box;border-radius:var(--ks-border-radius-innerMd);background-color:var(--ks-color-neutral-surface)}.calendar-event__bar{height:100%;overflow:hidden;white-space:nowrap;box-sizing:border-box;text-overflow:ellipsis;padding:var(--ks-spacing-50) var(--ks-spacing-100)}.calendar-event__bar--purple{color:var(--ks-color-data-data1-fillHigh);background-color:var(--ks-color-data-data1-surface);border-left:1px solid var(--ks-color-data-data1-fill);border-right:1px solid var(--ks-color-data-data1-fill)}.calendar-event__bar--blue{color:var(--ks-color-data-data2-fill);background-color:var(--ks-color-data-data2-surface);border-left:1px solid var(--ks-color-data-data5-fillMedHigh);border-right:1px solid var(--ks-color-data-data5-fillMedHigh)}.calendar-event__bar--pink{color:var(--ks-color-data-data3-fillHigh);background-color:var(--ks-color-data-data3-surface);border-left:1px solid var(--ks-color-data-data3-fillMedHigh);border-right:1px solid var(--ks-color-data-data3-fillMedHigh)}.calendar-event__bar--neutral{color:var(--ks-color-data-neutral-fillLow);background-color:var(--ks-color-data-neutral-surface);border-left:1px solid var(--ks-color-neutral-fill);border-right:1px solid var(--ks-color-neutral-fill)}.calendar-event__label{width:100%}.calendar-event__popover{display:flex;flex-direction:column;row-gap:var(--ks-spacing-100)}.calendar-event--placeholder{visibility:hidden}';const k="calendar-event";const g=class{constructor(t){a(this,t);this.placeholder=false;this.color="purple";this.hasTooltip=false}renderEvent(){const a={[`${k}__bar`]:true,[`${k}__bar--${this.color}`]:Boolean(this.color)};return t("div",{dir:o(),class:a},t("ks-text",{class:`${k}__label`,ellipsis:true,variant:"labelSm"},this.label))}render(){const a={[k]:true,[`${k}--placeholder`]:this.placeholder};return t(r,{key:"471e2c014fa87f40551505f82de82c771515ae99",dir:o(),"ks-name":"ks-calendar-event"},t("div",{key:"973bffcec8485b87ba067ccccd7f20f0e38fdcb7",class:a},!this.hasTooltip&&this.renderEvent.bind(this)(),this.hasTooltip&&t("ks-tooltip",{key:"9fa08d34519528b556898bfa561af47822dede39",placement:"top"},t("div",{key:"a2ff850e60c51ec6f2f132e9df4711ea0d0de517",class:`${k}__popover`,slot:"content"},t("slot",{key:"b3f2f23eb6e6d2bb5549f1a3b54cf1abcc864322",name:"popover"})),this.renderEvent.bind(this)())))}};g.style=b;const y='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}.calendar-month{display:grid;grid-template-columns:repeat(7, minmax(0, 1fr))}.calendar-month-day{display:flex;cursor:pointer;position:relative;aspect-ratio:1/1;box-sizing:border-box;color:var(--ks-color-neutral-highOnSurface);background-color:var(--ks-color-neutral-surface);transition-property:color, background-color;transition-duration:100ms;transition-timing-function:var(--ks-transition-easing-standardOut)}.calendar-month-day__label{transition-property:color, background-color;transition-duration:100ms;transition-timing-function:var(--ks-transition-easing-standardOut)}.calendar-month-day--within{color:var(--ks-color-neutral-highOnSurface);background-color:var(--ks-color-primary-surface3)}.calendar-month-day--disabled{color:var(--ks-color-neutral-onSurfaceDisabled);background-color:var(--ks-color-neutral-surface)}.calendar-month-day:not(.calendar-month-day--disabled,.calendar-month-day--active,.calendar-month-day--within):hover:not(:has([ks-calendar-event]:hover)){background-color:var(--ks-color-neutral-surfaceHover)}.calendar-month-day:not(.calendar-month-day--disabled,.calendar-month-day--active,.calendar-month-day--within):active:not(:has([ks-calendar-event]:hover)){background-color:var(--ks-color-neutral-surfaceActive)}.calendar-month--compact{grid-template-columns:repeat(7, 36px)}.calendar-month--compact .calendar-month__header{display:flex;align-items:center;justify-content:center;height:36px;width:36px;padding:0;border-bottom:none;aspect-ratio:1/1;font-size:var(--ks-text-labelLg-fontSize);line-height:var(--ks-text-labelLg-lineHeight);font-weight:var(--ks-text-labelLg-fontWeight);letter-spacing:var(--ks-text-labelLg-letterSpacing);font-family:var(--ks-text-labelLg-fontFamily)}.calendar-month--compact .calendar-month-day{align-items:center;justify-content:center;height:36px;width:36px;padding:0;border:none;border-radius:var(--ks-border-radius-md)}.calendar-month--compact .calendar-month-day__label{position:relative;font-size:var(--ks-text-bodySm-fontSize);line-height:var(--ks-text-bodySm-lineHeight);font-weight:var(--ks-text-bodySm-fontWeight);letter-spacing:var(--ks-text-bodySm-letterSpacing);font-family:var(--ks-text-bodySm-fontFamily);font-variant-numeric:lining-nums tabular-nums}.calendar-month--compact .calendar-month-day--active{color:var(--ks-color-primary-onFill);background-color:var(--ks-color-primary-fill)}.calendar-month--compact .calendar-month-day--active:hover{background-color:var(--ks-color-primary-fillHover)}.calendar-month--compact .calendar-month-day--active:active{background-color:var(--ks-color-primary-fillActive)}.calendar-month--compact .calendar-month-day--active.calendar-month-day--start{border-start-end-radius:0;border-end-end-radius:0}.calendar-month--compact .calendar-month-day--active.calendar-month-day--end{border-start-start-radius:0;border-end-start-radius:0}.calendar-month--compact .calendar-month-day--within{border-radius:0}.calendar-month--compact .calendar-month-day--today{color:var(--ks-color-primary-onSurface)}.calendar-month--compact .calendar-month-day--today .calendar-month-day__label::after{content:"";display:block;position:absolute;left:0;right:0;bottom:0;width:4px;height:4px;margin:0 auto;border-radius:var(--ks-border-radius-full);background-color:var(--ks-color-primary-onSurface);transform:translateY(50%)}.calendar-month--compact .calendar-month-day--today.calendar-month-day--active{color:var(--ks-color-primary-onFill)}.calendar-month--compact .calendar-month-day--today.calendar-month-day--active .calendar-month-day__label::after{background-color:var(--ks-color-primary-onFill)}.calendar-month--spacious .calendar-month__header{padding:var(--ks-spacing-200);color:var(--ks-color-neutral-onSurface);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}.calendar-month--spacious .calendar-month-day{flex-direction:column;justify-content:space-between;gap:var(--ks-spacing-200);padding:var(--ks-spacing-200);border:1px solid var(--ks-color-neutral-fillLow);margin-right:-1px;margin-bottom:-1px;position:relative;z-index:1}.calendar-month--spacious .calendar-month-day:nth-child(7n+1){border-inline-start:none}.calendar-month--spacious .calendar-month-day__label{height:24px;width:24px;display:flex;align-items:center;justify-content:center;border-radius:var(--ks-border-radius-md);font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily);font-variant-numeric:lining-nums tabular-nums}.calendar-month--spacious .calendar-month-day__events{height:92px}.calendar-month--spacious .calendar-month-day__events [ks-calendar-event]{display:inline-block;width:100%}.calendar-month--spacious .calendar-month-day--active{background-color:var(--ks-color-primary-surface3);border-color:var(--ks-color-primary-fill);z-index:3}.calendar-month--spacious .calendar-month-day--active:hover{background-color:var(--ks-ref-color-primary-900)}.calendar-month--spacious .calendar-month-day--active:active{background-color:var(--ks-color-primary-fillLow)}.calendar-month--spacious .calendar-month-day--start{border-inline-end-color:var(--ks-color-neutral-fillLow)}.calendar-month--spacious .calendar-month-day--within{border-top-color:var(--ks-color-primary-fill);border-bottom-color:var(--ks-color-primary-fill);z-index:2}.calendar-month--spacious .calendar-month-day--end{border-inline-start-color:var(--ks-color-neutral-fillLow)}.calendar-month--spacious .calendar-month-day--start,.calendar-month--spacious .calendar-month-day--end{background-color:var(--ks-color-primary-fillLow)}.calendar-month--spacious .calendar-month-day--start:hover,.calendar-month--spacious .calendar-month-day--end:hover{color:var(--ks-color-primary-fillHover)}.calendar-month--spacious .calendar-month-day--start:active,.calendar-month--spacious .calendar-month-day--end:active{color:var(--ks-color-primary-fillActive)}.calendar-month--spacious .calendar-month-day--today .calendar-month-day__label{color:var(--ks-color-primary-onFill);background-color:var(--ks-color-primary-fill)}';const x="calendar-month";const _=100;const w=17;const M=3;const z=["purple","blue","pink"];const S=class{constructor(t){a(this,t);this.ksDayClick=e(this,"ksDayClick",1);this.group=new u;this.selected=[];this.compact=false;this.events=[]}renderEvent(a,r,e,o="purple"){let i=n.isEqual(r,a.end);let l=1;for(let t=1;t<7-e;t++){const e=n.addDays(r,t);if(n.isEqual(a.end,e)||n.isAfter(a.end,e)){l++;i=i||n.isEqual(e,a.end)}else{i=true;break}}const s=`calc(${l*_}% + ${(l-1)*w}px)`;return t("ks-calendar-event",{label:a.name,color:o,style:{width:s}})}renderEventPlaceholder(){return t("ks-calendar-event",{placeholder:true})}renderEventMore(a){return t("ks-calendar-event",{hasTooltip:true,color:"neutral",label:`+${a.length} events`},a.map((a=>[t("ks-text",{variant:"labelSm",slot:"popover"},a.name)])))}renderCalendarContent(a){return t("slot",{name:`slot-content-${a.date.getTime()}`})}static __internal_renderDynamicSlots(a,t){return d(a,t)}renderPanelItem(a,r){const e=`${a.getDate()}`.padStart(2,"0");const o={[`${x}-day`]:true,[`${x}-day--today`]:n.isToday(a)&&this.month===n.getMonth(a),[`${x}-day--active`]:n.isEqual(a,this.selected[0])||n.isEqual(a,this.selected[1]),[`${x}-day--start`]:this.selected.length>1&&n.isEqual(a,this.selected[0]),[`${x}-day--within`]:this.selected.length>1&&n.isAfter(a,this.selected[0])&&n.isBefore(a,this.selected[1]),[`${x}-day--end`]:this.selected.length>1&&n.isEqual(a,this.selected[1]),[`${x}-day--disabled`]:a.getMonth()!==this.month};const l=[];if(!this.compact){const t=i.state.config.locale;const e=this.events.filter((r=>p(r,a,c(t))));const o=[];const n=this.group.getEventVisual(e,a,r%7);n.forEach((t=>{while(l.length<t.column&&l.length<M){l.push(this.renderEventPlaceholder());if(l.length>=M){break}}if(l.length>=M){o.push(t.event);return}const e=this.renderEvent(t.event,a,r%7,z[l.length%z.length]);if(e){l.push(e)}}));if(o.length>0){l.push(this.renderEventMore(o))}}const s=h(a).format("YYYY-MM-DD");const d=this.renderContent?.find((a=>{const t=h(a.date).format("YYYY-MM-DD");return s===t}));return t("div",{class:o,"data-index":r%7,onClick:()=>{this.ksDayClick.emit(a)},"data-testid":"calendar-month-index-vAM55M"},t("span",{class:`${x}-day__label`},e),!this.compact&&t("div",{class:`${x}-day__events`},d?this.renderCalendarContent(d):l))}render(){const a={[x]:true,[`${x}--compact`]:this.compact,[`${x}--spacious`]:!this.compact};const e=i.state.config.locale;const n=l(e,this.compact?"narrow":"short");const d=s(e,new Date(this.year,this.month)).flat();return t(r,{key:"9d827dcee80cd347100af3933818fdf553bfa1cc",dir:o(),"ks-calendar-month":true},t("div",{key:"2c4ce2338d80ddd204a77d0633ae4e33364070b7",dir:o(),class:a},n.map((a=>t("div",{class:`${x}__header`},t("span",null,a)))),d.map(this.renderPanelItem.bind(this))))}};S.style=y;export{g as ks_calendar_event,S as ks_calendar_month};