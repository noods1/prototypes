import{r as e,c as t,h as r,H as a,a as i}from"./p-BVbYP5UG.js";import{c as s}from"./p-BLeWSNPN.js";import{d as n}from"./p-O1A-ZSZs.js";import{S as o}from"./p-DtH7945i.js";import{d as l}from"./p-B9Bv72kO.js";import{s as d}from"./p-BpTTFEEs.js";import{V as p}from"./p-DTAuyNBn.js";import"@oddbird/popover-polyfill";import"./p-B85MJLTf.js";const c='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}.ks-quarter-panel{display:flex;flex-direction:row;box-shadow:var(--ks-size__shadow-sm) var(--ks-color__shadow);border-radius:var(--ks-border-radius-xl);width:fit-content;font-size:var(--ks-size__font-md)}.ks-quarter-panel-inner{flex:1}.ks-quarter-panel__grid{display:grid;grid-template-columns:repeat(3, 33.3333333333%);place-items:center center;align-content:space-around}.ks-quarter-panel__content{padding:8px}.ks-quarter-panel-preset{border-right:1px solid var(--ks-color-neutral-fillLow);background-color:var(--ks-color-primary-onFill);padding:var(--ks-spacing-200);min-width:160px;max-height:298px;overflow-y:auto}.ks-quarter-panel-preset-item{margin-bottom:18px;cursor:pointer}.ks-quarter-panel-preset-item:hover{color:var(--ks-color-primary-onSurface)}.ks-quarter-panel__header{display:flex;align-items:center;height:44px;border-bottom:1px solid var(--ks-color-neutral-fillLow)}.ks-quarter-panel__header:not(.ks-quarter-panel__header--center){padding:0 var(--ks-spacing-400)}.ks-quarter-panel__header-content{flex:1;text-align:center}.ks-quarter-panel__header-content .ks-quarter-panel__header-left{padding-left:4px}.ks-quarter-panel__header-content .ks-quarter-panel__header-right{padding-right:4px}.ks-quarter-panel__header-left,.ks-quarter-panel__header-right{display:flex;cursor:pointer}.ks-quarter-panel__header-left:hover,.ks-quarter-panel__header-right:hover{color:var(--ks-color-primary-onSurface)}.ks-quarter-panel__item,.ks-quarter-panel__gray-item{width:48px;place-content:center center;cursor:pointer;border-radius:var(--ks-border-radius-md);font-size:var(--ks-size__font-md);text-align:center}.ks-quarter-panel__item{border:1px solid transparent;height:36px;box-sizing:border-box;display:flex;align-items:center}.ks-quarter-panel__item--active{color:var(--ks-color-primary-onFill);background-color:var(--ks-color-primary-fill)}.ks-quarter-panel__item--disabled{color:var(--ks-color-neutral-onSurfaceDisabled);cursor:not-allowed}.ks-quarter-panel__item--disabled.ks-quarter-panel__item--active{background-color:var(--ks-color-primary-fillDisabled)}.ks-quarter-panel[dir=rtl] .ks-quarter-panel-preset{border-left:1px solid var(--ks-color__divider-default);border-right-width:0}.ks-quarter-panel[dir=rtl] .ks-quarter-panel__header-left,.ks-quarter-panel[dir=rtl] .ks-quarter-panel__header-right{transform:rotate(180deg)}.ks-quarter-panel__header-title{display:inline-flex;padding:0 10px}.ks-quarter-panel__header-content{font-size:var(--ks-text-labelLg-fontSize);line-height:var(--ks-text-labelLg-lineHeight);font-weight:var(--ks-text-labelLg-fontWeight);letter-spacing:var(--ks-text-labelLg-letterSpacing);font-family:var(--ks-text-labelLg-fontFamily)}.ks-quarter-panel__grid{display:grid;grid-template-columns:repeat(4, 63px);padding:8px;grid-row-gap:16px}.ks-quarter-panel__item{padding:2px;width:100%}.ks-quarter-panel__item-inner{width:100%;border-radius:var(--ks-border-radius-md);padding:6px 0;font-size:var(--ks-text-bodySm-fontSize);line-height:var(--ks-text-bodySm-lineHeight);font-weight:var(--ks-text-bodySm-fontWeight);letter-spacing:var(--ks-text-bodySm-letterSpacing);font-family:var(--ks-text-bodySm-fontFamily)}.ks-quarter-panel__item:not(.ks-quarter-panel__item--disabled,.ks-quarter-panel__item--active) .ks-quarter-panel__item-inner:hover{background-color:var(--ks-color-neutral-surfaceHover)}.ks-quarter-panel__item:not(.ks-quarter-panel__item--disabled,.ks-quarter-panel__item--active) .ks-quarter-panel__item-inner:active{background-color:var(--ks-color-neutral-surfaceActive)}.ks-quarter-panel__item--active .ks-quarter-panel__item-inner{background-color:var(--ks-color-primary-fill);color:var(--ks-color-primary-onFill)}';var u=undefined&&undefined.__decorate||function(e,t,r,a){var i=arguments.length,s=i<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,r):a,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)if(n=e[o])s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s;return i>3&&s&&Object.defineProperty(t,r,s),s};const h="ks-quarter-panel";const k=class{constructor(r){e(this,r);this.ksChange=t(this,"ksChange",1);this.activeDate=this.valueDate&&this.valueDate.length>0?this.valueDate[this.valueDate.length-1]:new Date;this.quarters=[];this.showYearPicker=false}valueWatcher(){this.generateQuarterRange()}get valueDate(){if(typeof this.value==="string"){throw Error("Invalid value, value must be Array")}return(this.value||[]).filter((e=>!!e)).map((e=>{if(typeof e==="string"){return new Date(e)}return e}))}set valueDate(e){this.value=e;this.ksChange.emit(this.value)}get locale(){return d.state.config.locale}componentWillLoad(){this.generateQuarterRange();if(this.startDate){this.activeDate=this.startDate}}addDate(e){if(this.single){this.valueDate=[e];return false}const t=this.valueDate.findIndex((t=>n.isSameQuarter(t,e)));if(t<0){this.valueDate=[...this.valueDate,e]}else{const e=this.valueDate;e.splice(t,1);this.valueDate=[...e]}return t>=0}generateQuarterRange(e){const t=n.getYear(e||this.startDate||this.valueDate[this.valueDate.length=1]||new Date);if(e){this.activeDate=e}this.quarters=n.eachQuarterOfInterval({start:new Date(`${t}-1-1`).setFullYear(t),end:new Date(`${t}-12-1`).setFullYear(t)})}jumpTo(e){const t=this.addDate(e);const r=n.getYear(e);this.showYearPicker=false;const[a]=this.quarters;if(!t&&r!==n.getYear(a)){this.generateQuarterRange()}}handleShowYearPicker(){this.showYearPicker=true}onYearChange(e){const t=e.detail||[];const r=t[t.length-1];this.activeDate=new Date(r).setFullYear(n.getYear(r));this.showYearPicker=false;this.generateQuarterRange(this.activeDate)}renderInnerContent(){const e=s(`${h}__grid`,`${h}__content`);if(this.showYearPicker){return r("div",{class:`${h}__inner`},r("ks-multiple-year-panel",{value:this.value,startDate:this.activeDate,onKsChange:e=>{this.onYearChange(e)},"data-testid":"quarter-multiple-quarter-panel-bX4fi4"}))}else{return r("div",{class:`${h}__inner`},r("div",{class:`${h}__header`},r("div",{class:`${h}__header-left`,onClick:e=>{e.stopPropagation();this.generateQuarterRange(n.subYears(this.activeDate,1))},"data-testid":"quarter-multiple-quarter-panel-42fPYe"},r("ks-icon-double-chevron-left",{size:"14"})),r("div",{class:`${h}__header-content`},r("div",{class:`${h}__header-title`,onClick:()=>this.handleShowYearPicker(),"data-testid":"quarter-multiple-quarter-panel-uHXWqy"},n.getYear(this.quarters[0]))),r("div",{class:`${h}__header-right`,onClick:e=>{e.stopPropagation();this.generateQuarterRange(n.subYears(this.activeDate,-1))},"data-testid":"quarter-multiple-quarter-panel-n4fXXz"},r("ks-icon-double-chevron-right",{size:"14"}))),r("div",{class:e},this.quarters.map((e=>{const t=this.disabledDate?.(e);return r("div",{key:n.getTime(e),onClick:()=>{if(!t){this.jumpTo(e)}},class:s(`${h}__item`,{[`${h}__item--active`]:this.valueDate.find((t=>n.isSameQuarter(t,e))),[`${h}__item--disabled`]:t}),"data-testid":`quarter-multiple-quarter-panel-jBxPSt-${n.getTime(e)}`},r("div",{class:`${h}__item-inner`},n.format(n.toDate(e),"QQQ")))}))))}}render(){return r(a,{key:"dbec9ff629819fd3227c1fa066326cdd38404f3d",dir:l(),"ks-multiple-quarter-panel":true},r("div",{key:"da89502e475c102341e6c1741597a536bfa64f82",dir:l(),class:`${h}`,part:"self"},this.presetSlot&&r("div",{key:"e4a0e8e3e74dd538f48835b71142fab4a69b8aca",class:`${h}-preset`},r("slot",{key:"e4117533c348f7253b5824f13a648bea2576a98a",name:"preset"})),this.renderInnerContent()))}get el(){return i(this)}static get watchers(){return{value:["valueWatcher"]}}};u([o({slotname:"preset"})],k.prototype,"presetSlot",void 0);u([p()],k.prototype,"value",void 0);k.style=c;export{k as ks_multiple_quarter_panel};