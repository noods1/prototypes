const e=(e,t)=>{if(typeof requestIdleCallback==="function"){return requestIdleCallback(e,t)}else{return setTimeout(e,16)}};const t=e=>{if(typeof cancelIdleCallback==="function"){cancelIdleCallback(e)}else{clearTimeout(e)}};function n(){const n=new WeakMap;return function(c,l,o){const a=n.get(c);if(a!==undefined){t(a);n.delete(c)}const r=e((e=>{n.delete(c);try{l(e)}catch(e){console.error("Error in scheduled low priority task:",e)}}),o);n.set(c,r)}}const c=n();export{c as s};