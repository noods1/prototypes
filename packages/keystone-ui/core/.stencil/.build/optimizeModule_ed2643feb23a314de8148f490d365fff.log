import{r as e,c as t,h as i,F as a,H as r,a as s}from"./p-BVbYP5UG.js";import{c as n}from"./p-BLeWSNPN.js";import{d as o}from"./p-O1A-ZSZs.js";import{S as l}from"./p-DtH7945i.js";import{d}from"./p-B9Bv72kO.js";import{V as c}from"./p-DTAuyNBn.js";import"@oddbird/popover-polyfill";import"./p-B85MJLTf.js";import"./p-BpTTFEEs.js";const k='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}.ks-week-panel{display:flex;flex-direction:row;box-shadow:var(--ks-size__shadow-sm) var(--ks-color__shadow);border-radius:var(--ks-border-radius-xl);width:fit-content;font-size:var(--ks-size__font-md)}.ks-week-panel-inner{flex:1}.ks-week-panel__grid{display:grid;grid-template-columns:repeat(7, 14.2857142857%);place-items:center center;align-content:space-around}.ks-week-panel__content{padding:8px}.ks-week-panel-preset{border-right:1px solid var(--ks-color-neutral-fillLow);background-color:var(--ks-color-primary-onFill);padding:var(--ks-spacing-200);min-width:160px;max-height:298px;overflow-y:auto}.ks-week-panel-preset-item{margin-bottom:18px;cursor:pointer}.ks-week-panel-preset-item:hover{color:var(--ks-color-primary-onSurface)}.ks-week-panel__header{display:flex;align-items:center;height:44px;border-bottom:1px solid var(--ks-color-neutral-fillLow)}.ks-week-panel__header:not(.ks-week-panel__header--center){padding:0 var(--ks-spacing-400)}.ks-week-panel__header-content{flex:1;text-align:center}.ks-week-panel__header-content .ks-week-panel__header-left{padding-left:4px}.ks-week-panel__header-content .ks-week-panel__header-right{padding-right:4px}.ks-week-panel__header-left,.ks-week-panel__header-right{display:flex;cursor:pointer}.ks-week-panel__header-left:hover,.ks-week-panel__header-right:hover{color:var(--ks-color-primary-onSurface)}.ks-week-panel__item,.ks-week-panel__gray-item{width:48px;place-content:center center;cursor:pointer;border-radius:var(--ks-border-radius-md);font-size:var(--ks-size__font-md);text-align:center}.ks-week-panel__item{border:1px solid transparent;height:36px;box-sizing:border-box;display:flex;align-items:center}.ks-week-panel__item--active{color:var(--ks-color-primary-onFill);background-color:var(--ks-color-primary-fill)}.ks-week-panel__item--disabled{color:var(--ks-color-neutral-onSurfaceDisabled);cursor:not-allowed}.ks-week-panel__item--disabled.ks-week-panel__item--active{background-color:var(--ks-color-primary-fillDisabled)}.ks-week-panel[dir=rtl] .ks-week-panel-preset{border-left:1px solid var(--ks-color__divider-default);border-right-width:0}.ks-week-panel[dir=rtl] .ks-week-panel__header-left,.ks-week-panel[dir=rtl] .ks-week-panel__header-right{transform:rotate(180deg)}.ks-week-panel[dir=rtl] .ks-week-panel__week-left{border-left:1px solid var(--ks-color__divider-default);border-right-width:0}.ks-week-panel__header-title{display:inline-flex;padding:0 2px}.ks-week-panel__week{display:flex}.ks-week-panel__week-left{padding:16px;display:flex;flex-direction:column;justify-content:space-around;border-right:1px solid var(--ks-color__divider-default)}.ks-week-panel__week-item{width:36px;line-height:36px}.ks-week-panel__title-section,.ks-week-panel__week-item{text-align:center}.ks-week-panel__row{display:grid;grid-template-columns:repeat(7, 36px);height:36px;align-items:center;place-content:space-around space-between}.ks-week-panel__row:not(.ks-week-panel__row:first-child,.ks-week-panel__row--disabled){border-radius:var(--ks-border-radius-md)}.ks-week-panel__row:not(.ks-week-panel__row:first-child,.ks-week-panel__row--disabled):hover{background-color:var(--ks-color-primary-surface2);cursor:pointer}.ks-week-panel__row--active{background-color:var(--ks-color-primary-surface2)}.ks-week-panel__row--active>:first-child .ks-week-panel__content-col-item,.ks-week-panel__row--active>:last-child .ks-week-panel__content-col-item{color:var(--ks-color-primary-onFill);background-color:var(--ks-color-primary-fill)}.ks-week-panel__row--disabled{cursor:not-allowed}.ks-week-panel__row--disabled .ks-week-panel__content-col{cursor:not-allowed}.ks-week-panel__content{padding:16px;display:grid;grid-template-rows:repeat(6, 36px);align-items:center;align-content:space-around}.ks-week-panel__content-col{text-align:center;line-height:36px;cursor:pointer;font-size:var(--ks-size__font-md);display:flex;justify-content:center;padding:0 0;margin:0}.ks-week-panel__content-col-item{width:36px;cursor:pointer;border-radius:var(--ks-border-radius-md);font-size:var(--ks-size__font-md);text-align:center}.ks-week-panel__content-col-item--disabled{color:var(--ks-color-neutral-onSurface);cursor:not-allowed}.ks-week-panel__content-col-gray{color:var(--ks-color-neutral-onSurfaceDisabled)}.ks-week-panel__item{width:22px;height:22px}';var p=undefined&&undefined.__decorate||function(e,t,i,a){var r=arguments.length,s=r<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,i):a,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)if(n=e[o])s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s;return r>3&&s&&Object.defineProperty(t,i,s),s};const h="ks-week-panel";const _=class{constructor(i){e(this,i);this.ksChange=t(this,"ksChange",1);this["ks-name"]="ks-multiple-week-panel";this.activeDate=this.valueDate?this.valueDate[this.valueDate.length-1]:new Date;this.days=[];this.weeks=[];this.showYearPicker=false;this.showMonthPicker=false}valueWatcher(){this.generateDateRange()}get valueDate(){if(typeof this.value==="string"){throw Error("Invalid value, value must be Array")}return(this.value||[]).filter((e=>!!e)).map((e=>{if(typeof e==="string"){return new Date(e)}return e}))}set valueDate(e){this.value=e;this.ksChange.emit(this.value)}generateDateRange(e){const t=e||this.valueDate[this.valueDate.length-1]||new Date;this.activeDate=t;const i=o.getDay(o.startOfMonth(t));const a=o.getDay(o.endOfMonth(t));const r=o.getWeeksInMonth(t);const s=7;const n=6;const l=i;const d=a-s-(n-r)*s+1;this.days=o.eachDayOfInterval({start:o.subDays(o.startOfMonth(t),l),end:o.subDays(o.endOfMonth(t),d)});this.weeks=o.eachWeekOfInterval({start:this.days[0],end:this.days[this.days.length-1]})}componentWillLoad(){this.generateDateRange(new Date)}handleShowYearPicker(){this.showYearPicker=true}handleShowMonthPicker(){this.showMonthPicker=true}onYearChange(e){const t=e.detail||[];const i=t[t.length-1];this.activeDate=new Date(i);this.showYearPicker=false;this.showMonthPicker=true}onMonthChange(e){const t=e.detail||[];const i=t[t.length-1];this.activeDate=new Date(i);this.showMonthPicker=false;this.generateDateRange(this.activeDate)}addDate(e){if(this.single){this.valueDate=[e];return false}const t=this.valueDate.findIndex((t=>o.isSameWeek(t,e)));if(t<0){this.valueDate=[...this.valueDate,e]}else{const e=this.valueDate;e.splice(t,1);this.valueDate=[...e]}return t>=0}jumpTo(e){const t=this.addDate(e);if(!t){this.generateDateRange()}}headerLayout(e,t){const{left:a,right:r,content:s}=e;return i("div",{class:`${h}__header`},i("div",{class:`${h}__header-left`,onClick:e=>{e.stopPropagation();t("left")},"data-testid":"week-multiple-week-panel-kxeAWB"},a),i("div",{class:`${h}__header-content`},s),i("div",{class:`${h}__header-right`,onClick:e=>{e.stopPropagation();t("right")},"data-testid":"week-multiple-week-panel-5Tjrex"},r))}renderDayContent(){return i(a,null,i("div",{class:`${h}__row`},this.days.slice(0,7).map(((e,t)=>i("div",{key:t,class:`${h}__content-col`,"data-testid":`week-multiple-week-panel-ibMAQb-${t}`},o.format(e,"EEEEEE"))))),this.weeks.map(((e,t)=>{const a=this.days.slice(t*7,(t+1)*7);return i("div",{key:`${o.getTime(e)}-${o.getWeek(e)}`,class:n(`${h}__row`,{[`${h}__row--active`]:this.valueDate.find((t=>o.isSameWeek(t,e))),[`${h}__row--disabled`]:a.every((e=>this.disabledDate?.(e)))}),"data-testid":`week-multiple-week-panel-39q4Ke-${`${o.getTime(e)}-${o.getWeek(e)}`}`},a.map((e=>{const t=!o.isSameMonth(this.activeDate,e);const a=this.disabledDate?.(e);return i("div",{class:n(`${h}__content-col`,{[`${h}__content-col-gray`]:t}),key:o.getTime(e),onClick:()=>{if(!a){this.jumpTo(e);if(t){this.generateDateRange(e)}}},"data-testid":`week-multiple-week-panel-75PfoF-${o.getTime(e)}`},i("div",{class:n(`${h}__content-col-item`,{[`${h}__content-col-item--disabled`]:a})},o.format(e,"d")))})))})))}renderHeader(){return this.headerLayout({left:i("ks-icon-double-chevron-left",{size:"14"}),right:i("ks-icon-double-chevron-right",{size:"14"}),content:this.headerLayout({left:i("ks-icon-chevron-left",{size:"14"}),right:i("ks-icon-chevron-right",{size:"14"}),content:i(a,null,i("div",{class:`${h}__header-title`,onClick:()=>this.handleShowMonthPicker(),"data-testid":"week-multiple-week-panel-ackdri"},o.format(this.activeDate,"MMM")),i("div",{class:`${h}__header-title`,onClick:()=>this.handleShowYearPicker(),"data-testid":"week-multiple-week-panel-6NHisS"},o.format(this.activeDate,"yyyy")))},(e=>{if(e==="left"){this.generateDateRange(o.subMonths(this.activeDate,1))}if(e==="right"){this.generateDateRange(o.subMonths(this.activeDate,-1))}}))},(e=>{if(e==="left"){this.generateDateRange(o.subYears(this.activeDate,1))}if(e==="right"){this.generateDateRange(o.subYears(this.activeDate,-1))}}))}renderYearPanel(){return i("ks-multiple-year-panel",{value:this.valueDate,startDate:this.activeDate,onKsChange:e=>{this.onYearChange(e)},"data-testid":"week-multiple-week-panel-cRCBdW"})}renderMonthPanel(){return i("ks-multiple-month-panel",{value:this.valueDate,startDate:this.activeDate,onKsChange:e=>{this.onMonthChange(e)},"data-testid":"week-multiple-week-panel-f2Z9L9"})}render(){return i(r,{key:"64bbb8ad263d8b83f651014980d00bd88525535b",dir:d(),"ks-multiple-week-panel":true},i("div",{key:"54f24b7e7aee667549bdfe32d7e1656132035d5c",part:"self",dir:d(),class:`${h}`},this.presetSlot&&i("div",{key:"5f8ecb2d42d79b9235ea2448c0fb09b28f51d931",class:`${h}-preset`},i("slot",{key:"1e97fcc91004350222bdc345748cc51e4f21292a",name:"preset"})),i("div",{key:"b52a1ba2983d4cc2c8d3ac7a02e1b6010421f4bc",class:`${h}-inner`},this.showMonthPicker&&this.renderMonthPanel(),this.showYearPicker&&this.renderYearPanel(),!this.showYearPicker&&!this.showMonthPicker&&i(a,{key:"3b5a39a01a70df2162da09bafd6562ba73134b22"},this.renderHeader(),i("div",{key:"f534d7c1d442b2d304b26f12bfe0a5d998509f94",class:`${h}__week`},i("div",{key:"0beac7d2404bed1f16ee06bb8f1afa50f719be71",class:`${h}__week-left`},i("div",{key:"b764385c3b7ce0b90544d7e9c7e6ecd86a0a1710",class:`${h}__title-section`},"å‘¨"),this.weeks.map(((e,t)=>{const a=this.disabledDate?.(e);const r=n(`${h}__item`,{[`${h}__content-cell-gray`]:!o.isSameMonth(this.activeDate,e)&&t!==0,[`${h}__item--active`]:this.valueDate.find((t=>o.isSameWeek(t,e))),[`${h}__item--disabled`]:a});return i("div",{onClick:()=>{if(!a){this.jumpTo(e)}},class:r,"data-testid":"week-multiple-week-panel-hW2h7o"},o.getWeek(e))}))),i("div",{key:"9f5661b2f3c3a03a4057b00d8e26569749ed7926",class:`${h}__content`},this.renderDayContent()))))))}get el(){return s(this)}static get watchers(){return{value:["valueWatcher"]}}};p([l({slotname:"preset"})],_.prototype,"presetSlot",void 0);p([c()],_.prototype,"value",void 0);_.style=k;export{_ as ks_multiple_week_panel};