import{r as e,c as t,h as i,H as s,a as o}from"./p-BVbYP5UG.js";import{d as a}from"./p-O1A-ZSZs.js";import{S as r}from"./p-DtH7945i.js";import{t as n,d as c}from"./p-B9Bv72kO.js";import{V as d}from"./p-DTAuyNBn.js";import{c as l}from"./p-CZoCRgNL.js";import"@oddbird/popover-polyfill";import"./p-BpTTFEEs.js";const f='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}.picker__footer{display:flex;align-items:center;justify-content:flex-end;border-top:1px solid var(--ks-color__divider-default);height:42px;padding:0 16px;column-gap:8px}[ks-date-comparison-panel]::part(self){box-shadow:none}.picker__selected-container{display:flex;color:var(--ks-color__primary2__font-default);font-size:var(--ks-size__font-md);row-gap:2px;flex-direction:column}.picker__selected-source{font-size:var(--ks-size__font-sm);line-height:1;color:var(--ks-color__primary2__font-default)}.picker__selected-target{font-size:var(--ks-size__font-sm);line-height:1;color:var(--ks-color__font-secondary)}.error__tips{font-size:var(--ks-size__font-md);color:var(--ks-color__danger__font-default);padding:0 20px}';var p=undefined&&undefined.__decorate||function(e,t,i,s){var o=arguments.length,a=o<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,r;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,i,s);else for(var n=e.length-1;n>=0;n--)if(r=e[n])a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a;return o>3&&a&&Object.defineProperty(t,i,a),a};const h=class{constructor(i){e(this,i);this.ksChange=t(this,"ksChange",1);this.ksShow=t(this,"ksShow",1);this.ksHide=t(this,"ksHide",1);this.ksVisibleChange=t(this,"ksVisibleChange",1);this.format="yyyy-MM-dd";this.width=300;this.placeholder="date-comparison.placeholder";this.placement="bottom-start"}watchValue(e){this.nativeDate=e}parseDate(e){return typeof e==="string"?new Date(e):e}formatToString(e){return e?e.map((e=>a.format(this.parseDate(e),this.format))).join(" ~ "):""}get valueDate(){const{isCompare:e,source:t,target:i}=this.value||{};if(e){return[this.formatToString(t),this.formatToString(i)].filter((e=>!!e))}else{return t?[this.formatToString(t)]:[]}}handleValueChange(e){this.nativeDate=e.detail}confirm(){if(this.nativeDate){this.ksChange?.emit(this.nativeDate)}this.popperRef.close?.()}cancel(){this.nativeDate=null;this.popperRef.close?.()}async closePanel(){this.popperRef?.close()}async openPanel(){this.popperRef?.open()}render(){return i(s,{key:"e652810b9b7e227d9ccc5211ce6c38e0c472a023",dir:c(),"ks-date-comparison-picker":true},i("ks-multiple-picker-base",{key:"f6678c4840edb0f6cf6582a694cf8c135ffa390d",placeholder:this.placeholder,disabled:this.disabled,status:this.status,width:this.width,showCount:false,value:this.valueDate,placement:this.placement,clearable:this.clearable,renderSelected:e=>{const t=document.createElement("div");t.className="picker__selected-container";const[i,s]=e;const{isCompare:o}=this.value;if(o){const e=document.createElement("div");const o=document.createElement("div");e.className="picker__selected-source";o.className="picker__selected-target";e.innerText=i;o.innerText=`${"date-comparison.compare-text"} ${s}`;t.appendChild(e);t.appendChild(o)}else{t.innerText=i}return t},onKsShow:()=>{this.ksVisibleChange.emit(true);this.ksShow?.emit?.()},onKsHide:()=>{this.ksVisibleChange.emit(false);this.ksHide?.emit?.()},popoverRef:e=>this.popperRef=e,"data-testid":"comparison-index-nWavfq"},this.prefixSlot&&i("slot",{key:"22b09b041746f294448ea040b45fed698453897f",slot:"prefix",name:"prefix"}),this.showIconSlot&&i("slot",{key:"d509ada3ba6cfbfb5d8ee59540cac96f4d5e255b",name:"show-icon",slot:"show-icon"}),this.suffixSlot&&i("slot",{key:"a9eb539841168133f6ddb0231f83a70c9efef056",name:"suffix",slot:"suffix"}),this.closeIconSlot&&i("slot",{key:"310bfd90e0ab74c066409749ab1689db79ec7bec",name:"close-icon",slot:"close-icon"}),i("div",{key:"a6f933f56d39a3e023b2280b4e3da88c9612f02c",class:"picker__panel"},i("ks-date-comparison-panel",{key:"76e41387f49a45d8ae8925b835f20d23d8dba4e0",onKsChange:this.handleValueChange.bind(this),value:this.value,"data-testid":"comparison-index-7hnX7e"},this.sourcePresets&&i("slot",{slot:"source-preset",key:"start",name:"source-preset","data-testid":"comparison-index-rw6zNQ"}),this.targetPresets&&i("slot",{slot:"target-preset",key:"target",name:"target-preset","data-testid":"comparison-index-aH14EE"})),i("div",{key:"7d65d62f2fe683af21cea9436194bc3699153164",class:"picker__footer",part:"footer"},this.nativeDate?.isCompare&&Array.isArray(this.nativeDate.target)&&this.nativeDate.target.length===0&&i("div",{key:"af988341013c3f4eda9d8b0dd12ec54a1a5d8fcc",class:"error__tips"},"date-comparison.error-target"),i("ks-button",{key:"6a4ff78be94fe536127e150c0c925ca9ab50bff4",variant:"text",size:"sm",onClick:()=>{this.cancel()},"data-testid":"comparison-index-n4J3cG"},n(l.cancel)),i("ks-button",{key:"c20c84461a486b7538edf39fadea29152402f5d6",variant:"primary",size:"sm",disabled:this.nativeDate?.isCompare&&Array.isArray(this.nativeDate.target)&&this.nativeDate.target.length===0,onClick:()=>{this.confirm()},"data-testid":"comparison-index-5pzG5q"},n(l.apply))))))}get el(){return o(this)}static get watchers(){return{value:["watchValue"]}}};p([r({slotname:"source-preset"})],h.prototype,"sourcePresets",void 0);p([r({slotname:"target-preset"})],h.prototype,"targetPresets",void 0);p([r({slotname:"show-icon"})],h.prototype,"showIconSlot",void 0);p([r({slotname:"close-icon"})],h.prototype,"closeIconSlot",void 0);p([r({slotname:"suffix"})],h.prototype,"suffixSlot",void 0);p([r({slotname:"prefix"})],h.prototype,"prefixSlot",void 0);p([d()],h.prototype,"value",void 0);h.style=f;export{h as ks_date_comparison_picker};