import{r as e,c as t,h as a,F as r,H as n,a as o}from"./p-BVbYP5UG.js";import{c as i}from"./p-BLeWSNPN.js";import{d as s}from"./p-O1A-ZSZs.js";import{S as l}from"./p-DtH7945i.js";import{i as c,d}from"./p-B9Bv72kO.js";import{s as p}from"./p-BpTTFEEs.js";import{e as _,b as f,d as h,c as b}from"./p-B29l_iU6.js";import{g as m}from"./p-H-KPsjGO.js";import{V as u}from"./p-DTAuyNBn.js";import"@oddbird/popover-polyfill";import"./p-B85MJLTf.js";import"./p-BsdBppw3.js";const v='@charset "UTF-8";ul,li{list-style:none;margin:0;padding:0}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}button::-moz-focus-inner{border:0;padding:0}.ks-text-bodyMd{font-size:var(--ks-text-bodyMd-fontSize);line-height:var(--ks-text-bodyMd-lineHeight);font-weight:var(--ks-text-bodyMd-fontWeight);letter-spacing:var(--ks-text-bodyMd-letterSpacing);font-family:var(--ks-text-bodyMd-fontFamily)}@keyframes breathing-opacity{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}.ks-skeleton,.animate-pulse{background-color:var(--ks-color-neutral-surface3);border-radius:var(--ks-border-radius-sm);animation-name:breathing-opacity;animation-duration:2s;animation-timing-function:cubic-bezier(0.455, 0, 0.55, 1);animation-fill-mode:forwards;animation-iteration-count:infinite}.ks-card-section{margin-bottom:var(--ks-spacing-400);font-size:var(--ks-text-titleMd-fontSize);line-height:var(--ks-text-titleMd-lineHeight);font-weight:var(--ks-text-titleMd-fontWeight);letter-spacing:var(--ks-text-titleMd-letterSpacing);font-family:var(--ks-text-titleMd-fontFamily)}*,:host{box-sizing:border-box}.panel{display:flex;flex-direction:row;box-shadow:var(--ks-size__shadow-sm) var(--ks-color__shadow);border-radius:var(--ks-border-radius-xl);width:fit-content;font-size:var(--ks-size__font-md)}.panel-inner{flex:1}.panel__grid{display:grid;grid-template-columns:repeat(7, 14.2857142857%);place-items:center center;align-content:space-around}.panel__content{padding:8px}.panel-preset{border-right:1px solid var(--ks-color-neutral-fillLow);background-color:var(--ks-color-primary-onFill);padding:var(--ks-spacing-200);min-width:160px;max-height:298px;overflow-y:auto}.panel-preset-item{margin-bottom:18px;cursor:pointer}.panel-preset-item:hover{color:var(--ks-color-primary-onSurface)}.panel__header{display:flex;align-items:center;height:44px;border-bottom:1px solid var(--ks-color-neutral-fillLow)}.panel__header:not(.panel__header--center){padding:0 var(--ks-spacing-400)}.panel__header-content{flex:1;text-align:center}.panel__header-content .panel__header-left{padding-left:4px}.panel__header-content .panel__header-right{padding-right:4px}.panel__header-left,.panel__header-right{display:flex;cursor:pointer}.panel__header-left:hover,.panel__header-right:hover{color:var(--ks-color-primary-onSurface)}.panel__item,.panel__gray-item{width:48px;place-content:center center;cursor:pointer;border-radius:var(--ks-border-radius-md);font-size:var(--ks-size__font-md);text-align:center}.panel__item{border:1px solid transparent;height:36px;box-sizing:border-box;display:flex;align-items:center}.panel__item--active{color:var(--ks-color-primary-onFill);background-color:var(--ks-color-primary-fill)}.panel__item--disabled{color:var(--ks-color-neutral-onSurfaceDisabled);cursor:not-allowed}.panel__item--disabled.panel__item--active{background-color:var(--ks-color-primary-fillDisabled)}.panel[dir=rtl] .panel-preset{border-left:1px solid var(--ks-color__divider-default);border-right-width:0}.panel[dir=rtl] .panel__header-left,.panel[dir=rtl] .panel__header-right{transform:rotate(180deg)}.panel__header-title{display:inline-flex;padding:0 2px;font-size:var(--ks-text-labelLg-fontSize);line-height:var(--ks-text-labelLg-lineHeight);font-weight:var(--ks-text-labelLg-fontWeight);letter-spacing:var(--ks-text-labelLg-letterSpacing);font-family:var(--ks-text-labelLg-fontFamily)}.panel__header-title:hover{color:var(--ks-color-primary-onSurface);cursor:pointer}.panel__header-title:active{color:var(--ks-color-primary-onSurfaceActive)}.panel__header-title-container{display:inline-flex;flex-direction:row}.panel__header-title-container--year-first{flex-direction:row-reverse}.panel__header-icon{padding:2px}.panel__header-icon+.panel__header-icon{padding-left:4px}.panel__header-icon{color:var(--ks-color-neutral-onSurface)}.panel__header-icon:hover{color:var(--ks-color-neutral-onSurfaceHover)}.panel__header-icon:focus,.panel__header-icon:active{color:var(--ks-color-neutral-onSurfaceHover)}.panel__header--center{height:auto;border-bottom:none}.panel__content{display:grid;grid-template-columns:repeat(7, 36px);grid-template-rows:repeat(6, 36px);place-content:space-around space-between}.panel__content-in-range{background-color:var(--ks-color-primary-surface2);border-color:var(--ks-color-primary-surface2);border-top-width:2px;border-top-color:white;border-top-style:solid;border-bottom-width:2px;border-bottom-color:white;border-bottom-style:solid}.panel__content-offset{border-top:1px dashed var(--ks-color-neutral-onSurface);border-bottom:1px dashed var(--ks-color-neutral-onSurface);z-index:3}.panel__content-offset.panel__content-cell-end .panel__item{border-right:1px dashed var(--ks-color-neutral-onSurface)}.panel__content-offset:not(.panel__content-offset--first,.panel__content-offset--last) .panel__item--active-first,.panel__content-offset:not(.panel__content-offset--first,.panel__content-offset--last) .panel__item--active-second{--before-border:1px dashed var(--ks-color-neutral-onSurface) !important;border-top:1px dashed var(--ks-color-neutral-onSurface);border-bottom:1px dashed var(--ks-color-neutral-onSurface)}.panel__content-offset.panel__content-cell-start .panel__item{border-left:1px dashed var(--ks-color-neutral-onSurface)}.panel__content-offset--first:not(.panel__content-cell-end,.panel__content-offset--last)::before{content:"";position:absolute;inset:0 0 0 0;border-radius:4px 0 0 4px;border:1px dashed var(--ks-color-neutral-onSurface);z-index:2;border-right-color:transparent;left:0}.panel__content-offset--first:not(.panel__content-cell-end,.panel__content-offset--last) .panel__item:hover{border-color:transparent}.panel__content-offset--first.panel__content-cell-start::before{left:0}.panel__content-offset--first.panel__content-cell-end:hover .panel__item,.panel__content-offset--first.panel__content-offset--last:hover .panel__item{border:1px dashed var(--ks-color-neutral-onSurface)}.panel__content-offset--first.panel__content-cell-end .panel__item,.panel__content-offset--first.panel__content-offset--last .panel__item{border:1px dashed var(--ks-color-neutral-onSurface)}.panel__content-offset--first:not(.panel__content-cell-end,.panel__content-cell-start,.panel__content-offset--last) .panel__item,.panel__content-offset--first.panel__content-cell-start .panel__item{border-right-color:transparent;border-radius:var(--ks-border-radius-md) 0 0 var(--ks-border-radius-md)}.panel__content-offset .panel__item:not(.panel__content-offset .panel__item--active):hover{color:inherit}.panel__content-offset--last.panel__content-cell-end .panel__item{border-right-color:transparent;border-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0}.panel__content-offset--last:not(.panel__content-cell-start,.panel__content-offset--first)::before{content:"";position:absolute;inset:0 0 0 0;border-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0;border:1px dashed var(--ks-color-neutral-onSurface);z-index:2;border-left-color:transparent;right:0}.panel__content-offset--last:not(.panel__content-cell-start,.panel__content-offset--first).panel__content-cell-end::before{right:0}.panel__content-offset--last{position:relative;z-index:2}.panel__content-offset--last:not(.panel__content-cell-end,.panel__content-cell-start,.panel__content-offset--first) .panel__item{border-left-color:transparent;border-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0}.panel__content-offset--first,.panel__content-offset--last{border:none}.panel__content-cell{text-align:center;display:flex;height:36px;box-sizing:border-box;position:relative;align-items:center;cursor:pointer;justify-content:center;font-size:var(--ks-text-bodySm-fontSize);line-height:var(--ks-text-bodySm-lineHeight);font-weight:var(--ks-text-bodySm-fontWeight);letter-spacing:var(--ks-text-bodySm-letterSpacing);font-family:var(--ks-text-bodySm-fontFamily)}.panel__content-cell--disabled{cursor:not-allowed}.panel__content-cell:not(.panel__content-offset):hover .panel__item:not(.panel__item--disabled,.panel__item--active){background-color:var(--ks-color-neutral-surfaceHover)}.panel__content-cell:not(.panel__content-offset):active .panel__item:not(.panel__item--disabled,.panel__item--active){background-color:var(--ks-color-neutral-surfaceActive)}.panel__content-cell:not(.panel__content-offset) .panel__item--today::after{content:"";position:absolute;bottom:2px;left:50%;transform:translateX(-50%);display:block;background-color:var(--ks-color-neutral-onFill);width:var(--ks-spacing-100);height:var(--ks-spacing-100);border-radius:var(--ks-border-radius-full)}.panel__content-cell:not(.panel__content-offset) .panel__item--today:not(.panel__item--disabled,.panel__item--active,.panel__gray-item){position:relative;color:var(--ks-color-primary-onSurface)}.panel__content-cell:not(.panel__content-offset) .panel__item--today:not(.panel__item--disabled,.panel__item--active,.panel__gray-item)::after{content:"";position:absolute;bottom:2px;left:50%;transform:translateX(-50%);display:block;background-color:var(--ks-color-primary-onSurface);width:var(--ks-spacing-100);height:var(--ks-spacing-100);border-radius:var(--ks-border-radius-full)}.panel__content-cell.panel__content-in-range:not(.panel__content-offset):hover .panel__item:not(.panel__item--disabled,.panel__item--active){background-color:var(--ks-color-primary-surface2)}.panel__content-cell.panel__content-in-range:not(.panel__content-offset):active .panel__item:not(.panel__item--disabled,.panel__item--active){background-color:var(--ks-color-primary-surface2)}.panel__content-cell-start{padding:0;margin-left:0;margin-right:0;padding-right:0;border-radius:var(--ks-border-radius-md) 0 0 var(--ks-border-radius-md)}.panel__content-cell-end{padding:0;margin-right:0;margin-left:0;padding-left:0;border-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0}.panel__content-cell-end.panel__content-offset--first .panel__item,.panel__content-cell-start.panel__content-offset--last .panel__item{border:1px dashed var(--ks-color-neutral-onSurface);border-radius:var(--ks-border-radius-md)}.panel__content-cell-gray{color:var(--ks-color-neutral-onSurfaceDisabled)}.panel__content-cell:not(.panel__content-cell-start) .panel__item--active-second{--before-border:1px solid var(--ks-color-primary-surface2);border-radius:0 var(--ks-border-radius-md) var(--ks-border-radius-md) 0}.panel__content-cell:not(.panel__content-cell-start) .panel__item--active-second::before{content:" ";position:absolute;width:2px;height:100%;left:-1px;transform:translateX(-100%);background-color:var(--ks-color-primary-surface2);border-top:var(--before-border);border-bottom:var(--before-border)}.panel__content-cell:not(.panel__content-cell-end) .panel__item--active-first{--before-border:1px solid var(--ks-color-primary-surface2);border-radius:var(--ks-border-radius-md) 0 0 var(--ks-border-radius-md)}.panel__content-cell:not(.panel__content-cell-end) .panel__item--active-first::before{content:" ";position:absolute;width:2px;height:100%;right:-1px;transform:translateX(100%);background-color:var(--ks-color-primary-surface2);border-top:var(--before-border);border-bottom:var(--before-border)}.panel__content-week{font-size:var(--ks-text-labelLg-fontSize);line-height:var(--ks-text-labelLg-lineHeight);font-weight:var(--ks-text-labelLg-fontWeight);letter-spacing:var(--ks-text-labelLg-letterSpacing);font-family:var(--ks-text-labelLg-fontFamily);color:var(--ks-color-neutral-onSurface)}.panel__item--active{position:relative}.panel__item,.panel__gray-item{width:calc(100% - var(--ks-spacing-100));height:calc(100% - var(--ks-spacing-100));box-sizing:border-box;z-index:1;display:flex;align-items:center}';var g=undefined&&undefined.__decorate||function(e,t,a,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,a):r,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,a,r);else for(var s=e.length-1;s>=0;s--)if(i=e[s])o=(n<3?i(o):n>3?i(t,a,o):i(t,a))||o;return n>3&&o&&Object.defineProperty(t,a,o),o};const k="panel";const x=class{constructor(a){e(this,a);this.ksChange=t(this,"ksChange",1);this.ksDateHover=t(this,"ksDateHover",1);this.ksViewDateChange=t(this,"ksViewDateChange",1);this["ks-name"]="ks-multiple-date-panel";this.activeDate=this.valueDate?this.valueDate[this.valueDate.length-1]:new Date;this.days=[];this.showYearPicker=false;this.showMonthPicker=false;this.position="left"}valueWatcher(){this.generateDateRange()}get valueDate(){if(typeof this.value==="string"){throw Error("Invalid value, value must be Array")}return(this.value||[]).filter((e=>!!e)).map((e=>{if(typeof e==="string"){return new Date(e)}return e}))}set valueDate(e){this.ksChange?.emit?.(e)}get locale(){return p.state.config.locale}watchStartDate(e,t){if(!s.isSameDay(e,t)){this.generateDateRange()}}generateDateRange(e){const t=e||this.startDate||this.valueDate[this.valueDate.length-1]||new Date;this.activeDate=t;const a=s.getDay(s.endOfMonth(t));const r=s.getWeeksInMonth(t);const n=7;const o=6;const i=m(this.locale);let l=s.getDay(s.startOfMonth(t));let c=a-n-(o-r)*n+1;if(i===1){if(l>0){l-=1;c-=1}else{l+=7;c+=7}}else if(i===6){l+=1;c+=1}this.days=s.eachDayOfInterval({start:s.subDays(s.startOfMonth(t),l),end:s.subDays(s.endOfMonth(t),c)});this.ksViewDateChange?.emit?.(t);this.onviewdatechange?.(t)}componentWillLoad(){this.generateDateRange()}handleShowYearPicker(){this.showYearPicker=true}handleShowMonthPicker(){this.showMonthPicker=true}onYearChange(e){const t=e.detail||[];this.showYearPicker=false;this.showMonthPicker=true;if(t.length===0){return false}const a=t[t.length-1];this.activeDate=new Date(a)}onMonthChange(e){const t=e.detail||[];this.showMonthPicker=false;if(t.length===0){return false}const a=t[t.length-1];this.activeDate=new Date(a);this.generateDateRange(this.activeDate)}jumpTo(e){const t=this.addDate(e);if(!t){this.generateDateRange()}}addDate(e){if(this.single){this.valueDate=[e];return false}const t=Math.abs(this.offset);if(t>0){this.valueDate=[e,s.subDays(e,-t)];return false}if(this.range){const[t,a]=this.valueDate||[];if(!t&&!a||t&&a){this.valueDate=[e]}else{const r=[t,a,e].filter((e=>!!e));this.valueDate=[s.min(r),s.max(r)];this.flagDate=null}return false}const a=this.valueDate.findIndex((t=>s.isSameDay(t,e)));if(a<0){this.valueDate=[...this.valueDate,e]}else{const e=this.valueDate;e.splice(a,1);this.valueDate=[...e]}return a>=0}get timeZoneToday(){const{timezoneOffset:e}=p.state.i18n;const t=new Date;const a=(t.getTimezoneOffset()+e)*60*1e3;const r=new Date(t.getTime()+a);return s.startOfDay(r)}headerLayout(e,t){const{left:r,right:n,content:o,extraHeaderClass:s,position:l}=e;return a("div",{class:i(`${k}__header`,`${k}__header--${l}`,{[s]:s}),part:"header"},a("div",{class:`${k}__header-left`,onClick:e=>{e.stopPropagation();t("left")},part:"left","data-testid":"day-multiple-date-panel-rf6YNj"},r),a("div",{class:`${k}__header-content`,part:"header-content"},o),a("div",{class:`${k}__header-right`,part:"right",onClick:e=>{e.stopPropagation();t("right")},"data-testid":"day-multiple-date-panel-cG9mro"},n))}dateInRange(e,t,a){if(!e||!t||!s.isValid(e)||!s.isValid(t)){return false}const r=t?s.startOfDay(t):t;return s.isBefore(a,e)&&s.isAfter(a,r)||s.isBefore(a,r)&&s.isAfter(a,e)}calculateDateInRange(e){if(this.valueDate.length>=1){const[t,a]=this.valueDate||[];const r=this.flagDate||a;return this.dateInRange(t,r,e)}return false}inOffset(e){if(!this.currentHoverDate){return false}const t=s.subDays(this.currentHoverDate,1);const a=s.subDays(this.currentHoverDate,-Math.abs(this.offset)-1);return this.dateInRange(t,a,e)}renderDayContent(){const e=Math.abs(this.offset);return a(r,null,this.days.slice(0,7).map(((e,t)=>a("div",{class:`${k}__content-cell ${k}__content-week`,key:t,"data-testid":`day-multiple-date-panel-deSFLA-${t}`},_(e,this.locale)))),this.days.map(((t,r)=>{const n=!s.isSameMonth(this.activeDate,t);const o=this.disabledDate?.(t,!this.range,this.valueDate?.[0]);const l=this.calculateDateInRange(t)&&!o;const d=!n&&(this.valueDate.find((e=>s.isSameDay(e,t)))||this.flagDate&&s.isSameDay(this.flagDate,t));return a("div",{part:"content-cell",key:s.getTime(t),onMouseEnter:()=>{if(!o){this.currentHoverDate=t;this.ksDateHover.emit(t);this.ondatehover?.(t)}},class:i(`${k}__content-cell`,{[`${k}__content-cell--disabled`]:o,[`${k}__content-cell-gray`]:n,[`${k}__content-cell-${c()?"start":"end"}`]:(r+1)%7===0,[`${k}__content-cell-${!c()?"start":"end"}`]:r%7===0,[`${k}__content-in-range`]:this.range&&!n&&l,[`${k}__content-offset`]:this.inOffset(t)&&!n,[`${k}__content-offset--${!c()?"first":"last"}`]:this.inOffset(t)&&s.isSameDay(t,this.currentHoverDate)&&!n,[`${k}__content-offset--${c()?"first":"last"}`]:this.inOffset(t)&&s.isSameDay(t,s.subDays(this.currentHoverDate,-e))&&!n}),onClick:()=>{if(!o){this.jumpTo(t);if(n){this.generateDateRange(t)}}},"data-testid":`day-multiple-date-panel-f6WGiY-${s.getTime(t)}`},a("div",{class:i({[`${k}__item`]:!n,[`${k}__gray-item`]:n,[`${k}__item--disabled`]:o,[`${k}__item--today`]:s.isSameDay(this.timeZoneToday,t),[`${k}__item--active-${!c()?"first":"second"}`]:d&&this.range&&(this.valueDate.length>=2&&this.valueDate.findIndex((e=>s.isSameDay(e,t)))===0||this.valueDate.length===1&&this.flagDate&&(s.isAfter(this.valueDate[0],this.flagDate)&&s.isSameDay(t,this.flagDate)||s.isBefore(this.valueDate[0],this.flagDate)&&s.isSameDay(this.valueDate[0],t))),[`${k}__item--active-${c()?"first":"second"}`]:d&&this.range&&(this.valueDate.length>=2&&this.valueDate.findIndex((e=>s.isSameDay(e,t)))===1||this.valueDate.length===1&&this.flagDate&&(s.isAfter(this.flagDate,this.valueDate[0])&&s.isSameDay(t,this.flagDate)||s.isBefore(this.flagDate,this.valueDate[0])&&s.isSameDay(this.valueDate[0],t))),[`${k}__item--active`]:d})},s.format(t,"d")))})))}renderHeader(){const e=f(s.toDate(this.activeDate),this.locale);const t=/^\d+/.test(e);return this.headerLayout({left:a("ks-icon-double-chevron-left",{size:"14",class:`${k}__header-icon`}),right:a("ks-icon-double-chevron-right",{size:"14",class:`${k}__header-icon`}),content:this.headerLayout({left:a("ks-icon-chevron-left",{size:"14",class:`${k}__header-icon`}),right:a("ks-icon-chevron-right",{size:"14",class:`${k}__header-icon`}),extraHeaderClass:`${k}__header--center`,content:a("div",{class:i(`${k}__header-title-container`,{[`${k}__header-title-container--year-first`]:t})},a("div",{class:`${k}__header-title`,onClick:()=>this.handleShowMonthPicker(),"data-testid":"day-multiple-date-panel-86Kvoa"},b(s.toDate(this.activeDate),this.locale)),a("div",{class:`${k}__header-title`,onClick:()=>this.handleShowYearPicker(),"data-testid":"day-multiple-date-panel-nxRoAU"},h(s.toDate(this.activeDate),this.locale)))},(e=>{if(e==="left"){this.generateDateRange(s.subMonths(this.activeDate,1))}if(e==="right"){this.generateDateRange(s.subMonths(this.activeDate,-1))}})),position:this.position},(e=>{if(e==="left"){this.generateDateRange(s.subYears(this.activeDate,1))}if(e==="right"){this.generateDateRange(s.subYears(this.activeDate,-1))}}))}renderYearPanel(){return a("ks-multiple-year-panel",{value:this.valueDate,startDate:this.activeDate,onKsChange:e=>{this.onYearChange(e)},"data-testid":"day-multiple-date-panel-mpiiQ4"})}renderMonthPanel(){return a("ks-multiple-month-panel",{value:this.valueDate,startDate:this.activeDate,onKsChange:e=>{this.onMonthChange(e)},"data-testid":"day-multiple-date-panel-akrpxX"})}render(){return a(n,{key:"bf9bf38ed9ed81a09dca1d9cae8dae0d350a810f",dir:d(),"ks-multiple-date-panel":true},a("div",{key:"256b535f2570784af830e9a44bd161e65b1bc874",dir:d(),class:`${k}`,part:"self"},this.presetSlot&&a("div",{key:"9bb7a1c5fa100230ed655ee1af2c51e93054d8d4",class:`${k}-preset`},a("slot",{key:"7bb0350f0e6e32467bcd94a3c638e1d81e260aab",name:"preset"})),a("div",{key:"dda5fc46b75ca1f3894e4ab7bf0b2ddee9772c6b",class:`${k}-inner`},this.showMonthPicker&&this.renderMonthPanel(),this.showYearPicker&&this.renderYearPanel(),!this.showYearPicker&&!this.showMonthPicker&&a(r,{key:"aab7d34ddd634d04ce5372bfdd4878f973f1cf8d"},this.renderHeader(),a("div",{key:"7e9ae2a0a062c6ea470fed6c43e2dd552827f3fd",class:`${k}__content`,part:"content"},this.renderDayContent())))))}get el(){return o(this)}static get watchers(){return{value:["valueWatcher"],startDate:["watchStartDate"]}}};g([l({slotname:"preset"})],x.prototype,"presetSlot",void 0);g([u()],x.prototype,"value",void 0);x.style=v;export{x as ks_multiple_date_panel};