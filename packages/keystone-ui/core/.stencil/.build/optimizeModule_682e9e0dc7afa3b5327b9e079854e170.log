import{q as t,t as e}from"./p-BVbYP5UG.js";const n={ar:0,"cs-CZ":1,de:2,en:3,es:4,fr:5,id:6,it:7,ja:8,ko:9,ms:10,"pl-PL":11,"pt-BR":12,pt:12,ru:13,"sv-SE":14,th:15,tr:16,vi:17,zh:18};function o(t,e,o,...s){const r=n[t];const c=n[e];const i=o[r]||o[c]||"";const[a]=s;if(a){return i.replace(/\{(.*?)\}/g,((t,e)=>{var n;return String((n=a[e])!==null&&n!==void 0?n:"")}))}return i||""}function s(t){return Object.prototype.hasOwnProperty.call(n,String(t))}const r=(t,e,n)=>{const o=t.get(e);if(!o){t.set(e,[n])}else if(!o.includes(n)){o.push(n)}};const c=(t,e)=>{let n;return(...o)=>{if(n){clearTimeout(n)}n=setTimeout((()=>{n=0;t(...o)}),e)}};const i=t=>!("isConnected"in t)||t.isConnected;const a=c((t=>{for(let e of t.keys()){t.set(e,t.get(e).filter(i))}}),2e3);const u=()=>{if(typeof t!=="function"){return{}}const n=new Map;return{dispose:()=>n.clear(),get:e=>{const o=t();if(o){r(n,e,o)}},set:t=>{const o=n.get(t);if(o){n.set(t,o.filter(e))}a(n)},reset:()=>{n.forEach((t=>t.forEach(e)));a(n)}}};const f=t=>typeof t==="function"?t():t;const l=(t,e=(t,e)=>t!==e)=>{const n=f(t);let o=new Map(Object.entries(n??{}));const s={dispose:[],get:[],set:[],reset:[]};const r=new Map;const c=()=>{o=new Map(Object.entries(f(t)??{}));s.reset.forEach((t=>t()))};const i=()=>{s.dispose.forEach((t=>t()));c()};const a=t=>{s.get.forEach((e=>e(t)));return o.get(t)};const u=(t,n)=>{const r=o.get(t);if(e(n,r,t)){o.set(t,n);s.set.forEach((e=>e(t,n,r)))}};const l=typeof Proxy==="undefined"?{}:new Proxy(n,{get(t,e){return a(e)},ownKeys(t){return Array.from(o.keys())},getOwnPropertyDescriptor(){return{enumerable:true,configurable:true}},has(t,e){return o.has(e)},set(t,e,n){u(e,n);return true}});const p=(t,e)=>{s[t].push(e);return()=>{d(s[t],e)}};const m=(e,n)=>{const o=(t,o)=>{if(t===e){n(o)}};const s=()=>n(f(t)[e]);const c=p("set",o);const i=p("reset",s);r.set(n,{setHandler:o,resetHandler:s,propName:e});return()=>{c();i();r.delete(n)}};const g=(...t)=>{const e=t.reduce(((t,e)=>{if(e.set){t.push(p("set",e.set))}if(e.get){t.push(p("get",e.get))}if(e.reset){t.push(p("reset",e.reset))}if(e.dispose){t.push(p("dispose",e.dispose))}return t}),[]);return()=>e.forEach((t=>t()))};const y=t=>{const e=o.get(t);s.set.forEach((n=>n(t,e,e)))};const w=(t,e)=>{const n=r.get(e);if(n&&n.propName===t){d(s.set,n.setHandler);d(s.reset,n.resetHandler);r.delete(e)}};return{state:l,get:a,set:u,on:p,onChange:m,use:g,dispose:i,reset:c,forceUpdate:y,removeListener:w}};const d=(t,e)=>{const n=t.indexOf(e);if(n>=0){t[n]=t[t.length-1];t.length--}};const p=(t,e)=>{const n=l(t,e);n.use(u());return n};const m={enabled:true,container:document.body};const g={modal:1e3,message:2e3};const y=document.body;function w(t,e,n){let o=t+JSON.stringify(n);let s=e(t,n);return(t,n)=>{if(t!==o){s=e(t,n);o=t+JSON.stringify(n)}return s}}function b(t,e){let n;try{n=globalThis||window||global}catch(t){}const o=n.__keystone_global_cache__||(n.__keystone_global_cache__=new Map);return()=>{let n=o.get(t);if(!n){n=e();o.set(t,n);n.catch((()=>o.delete(t)))}return n}}const h=new URLSearchParams(window.location.search).get("aadvid")||"";const v=Boolean(h)&&["ads.tiktok.com","boei18n-ads.byteoversea.net"].includes(location.host);const S=b("ttamMain-loadI18nInfo",(()=>fetch(`/api/v3/i18n/account/extra/?aadvid=${h}`).then((t=>t.json())).then((({data:t})=>t.timezone))));async function M(){try{if(v){return await S()||0}}catch(t){return}return}function O(){try{const t=document.cookie.match(/(^|;\s*)lang_type=([^;]*)/)?.pop()||"";if(s(t)){return t}}catch(t){}return"en"}const z=p({config:{locale:O(),lockScroll:m,zIndex:g},i18n:{timezoneOffset:0,timezoneName:"",isManuallySet:false}});(function t(){M().then((t=>{if(t&&!z.get("i18n").isManuallySet){const{value:e=0,timezone:n}=t||{};z.set("i18n",{timezoneOffset:e,timezoneName:n,isManuallySet:false})}}))})();export{y as B,m as L,g as Z,w as c,O as g,s as i,o as r,z as s};